(()=>{var e={};e.id=22,e.ids=[22],e.modules={1338:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(20413).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/madeandenis/web-projects/crs/dashboard/src/app/(routes)/departments/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/madeandenis/web-projects/crs/dashboard/src/app/(routes)/departments/page.tsx","default")},1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7066:e=>{"use strict";e.exports=require("node:tty")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},16698:e=>{"use strict";e.exports=require("node:async_hooks")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31421:e=>{"use strict";e.exports=require("node:child_process")},33873:e=>{"use strict";e.exports=require("path")},34922:(e,t,r)=>{Promise.resolve().then(r.bind(r,1338))},48161:e=>{"use strict";e.exports=require("node:os")},49514:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>w});var s=r(28625),n=r(64996),o=r(95942),a=r(59294),i=r(66743),l=r(15316),d=r(43269),c=r(19554),p=r(77402),u=r(93901),m=r(88568),x=r(79155),h=r(78361),g=r(85764);let b=({departments:e,refetch:t,withActions:r})=>{let{t:o}=(0,x.Bd)(),[i,b]=(0,n.useState)({}),[y,f]=(0,n.useState)(null),[j,v]=(0,n.useState)([]),C=h.iw.useDelete({},{onSuccess:()=>t?.()}),w=h.iw.useDeleteMany({},{onSuccess:()=>t?.()}),q=e=>{b(t=>({...t,[e]:!t[e]}))},A=e=>{v(Array.isArray(e)?e:[e])},N=[{label:o("common.fields.id"),align:"right",sortable:!0,sortFn:(e,t)=>e.id-t.id},{label:o("common.fields.name"),align:"left",sortable:!0,sortFn:(e,t)=>e.name.localeCompare(t.name,"ro",{sensitivity:"base"})},{label:o("entities.employee.plural"),align:"center",sortable:!0,sortFn:(e,t)=>(e.employees?.length||0)-(t.employees?.length||0)}],P=[{render:e=>(0,s.jsxs)("span",{className:"px-4 py-2 text-sm font-mono bg-gray-50 rounded",children:["#",e.id]})},{render:e=>(0,s.jsx)("span",{className:"truncate font-medium cursor-pointer",children:(0,c.wR)(e.name)??(0,s.jsx)("span",{className:"text-gray-400",children:"—"})}),className:"bg-zinc-50"},{render:e=>e.employees?.length?(0,s.jsxs)("button",{onClick:()=>q(e.id),className:"inline-flex items-center gap-2 px-4 py-2 bg-white hover:bg-gray-50 border border-gray-200 hover:border-gray-300 rounded-lg text-gray-700 hover:text-gray-900 transition-all duration-200 shadow-sm hover:shadow text-sm font-medium",children:[i[e.id]?(0,s.jsx)(d.Vr3,{className:"text-xs text-gray-500"}):(0,s.jsx)(d.X6T,{className:"text-xs text-gray-500"}),(0,s.jsxs)("span",{children:[e.employees.length," ",o("common.entities.employee")]})]}):(0,s.jsx)("span",{className:"text-gray-400",children:"—"}),expandedContent:{render:e=>i[e.id]&&e.employees?.length?(0,s.jsx)(p.Q,{employees:e.employees.map(t=>({...t,department:{id:e.id,name:e.name,description:e.description,createdAt:e.createdAt,updatedAt:e.updatedAt}})),tableProps:{ignoreColumns:[4,5],classNames:{container:"rounded-md overflow-x-auto shadow-xl border border-gray-200"},search:{enabled:!1}}}):null,onClose:e=>q(e.id)}}],k=r?[{icon:(0,s.jsx)(u.Yvo,{size:16}),onRowAction:e=>f(e)},{icon:(0,s.jsx)(u.b6i,{size:16}),onRowAction:e=>A(e),onBulkAction:e=>A(e)}]:[],_=(0,s.jsx)(l.W,{data:e,actions:k,headerColumns:N,dataColumns:P,padding:{dataCell:{all:4}}});return r?(0,s.jsxs)(s.Fragment,{children:[_,y&&(0,s.jsx)(a.h,{open:!0,department:y,onClose:()=>f(null),onRefresh:t}),(0,s.jsx)(m.C,{open:j.length>0,items:j,itemName:o("common.entities.department"),getIdentifier:e=>e?.id?`#${e.id}`:"",onConfirm:e=>{(0,g.Y)(e,C.mutate,w.mutate),v([])},onCancel:()=>v([])})]}):_},y=({roles:e,withActions:t,refetch:r})=>{let{t:o}=(0,x.Bd)(),[a,b]=(0,n.useState)({}),[y,f]=(0,n.useState)(null),[j,v]=(0,n.useState)([]),C=h.Mg.useDelete({},{onSuccess:()=>r?.()}),w=h.Mg.useDeleteMany({},{onSuccess:()=>r?.()}),q=e=>{b(t=>({...t,[e]:!t[e]}))},A=e=>{v(Array.isArray(e)?e:[e])},N=[{label:o("common.fields.id"),align:"right",sortable:!0,sortFn:(e,t)=>e.id-t.id},{label:o("common.fields.name"),align:"left",sortable:!0,sortFn:(e,t)=>e.name.localeCompare(t.name,"ro",{sensitivity:"base"})},{label:o("common.fields.description"),align:"left",sortable:!1},{label:o("entities.employee.plural"),align:"center",sortable:!0,sortFn:(e,t)=>(e.employees?.length||0)-(t.employees?.length||0)}],P=[{render:e=>(0,s.jsxs)("span",{className:"px-4 py-2 text-sm font-mono bg-gray-50 rounded",children:["#",e.id]})},{render:e=>(0,s.jsx)("span",{className:"truncate font-medium cursor-pointer",children:(0,c.wR)(e.name)??(0,s.jsx)("span",{className:"text-gray-400",children:o("common.fields.empty")})}),className:"bg-gray-50"},{render:e=>(0,s.jsx)("span",{className:"truncate text-gray-600 text-sm",children:e.description?(0,c.wR)(e.description):(0,s.jsx)("span",{className:"text-gray-400",children:o("common.fields.empty")})})},{render:e=>e.employees?.length?(0,s.jsxs)("button",{onClick:()=>q(e.id),className:"inline-flex items-center gap-2 px-4 py-2 bg-white hover:bg-gray-50 border border-gray-200 hover:border-gray-300 rounded-lg text-gray-700 hover:text-gray-900 transition-all duration-200 shadow-sm hover:shadow text-sm font-medium",children:[a[e.id]?(0,s.jsx)(d.Vr3,{className:"text-xs text-gray-500"}):(0,s.jsx)(d.X6T,{className:"text-xs text-gray-500"}),(0,s.jsxs)("span",{children:[e.employees.length," ",o("common.entities.employee")]})]}):(0,s.jsx)("span",{className:"text-gray-400",children:o("common.fields.empty")}),expandedContent:{render:e=>a[e.id]&&e.employees?.length?(0,s.jsx)(p.Q,{employees:e.employees.map(t=>({...t,role:{id:e.id,name:e.name,description:e.description,createdAt:e.createdAt}})),tableProps:{ignoreColumns:[3],classNames:{container:"rounded-md overflow-x-auto shadow-xl border border-gray-200 w-full"},search:{enabled:!1}}}):null,onClose:e=>q(e.id)}}],k=t?[{icon:(0,s.jsx)(u.Yvo,{size:16}),onRowAction:e=>f(e)},{icon:(0,s.jsx)(u.b6i,{size:16}),onRowAction:e=>A(e),onBulkAction:e=>A(e)}]:[];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.W,{data:e,headerColumns:N,dataColumns:P,actions:k,padding:{dataCell:{all:4}}}),y&&(0,s.jsx)(i.F,{open:!0,role:y,onClose:()=>f(null),onRefresh:r}),(0,s.jsx)(m.C,{open:j.length>0,items:j,itemName:o("common.entities.role"),getIdentifier:e=>e?.id?`#${e.id}`:"",onConfirm:e=>{(0,g.Y)(e,C.mutate,w.mutate),v([])},onCancel:()=>v([])})]})};var f=r(56773),j=r(36863);function v({tabs:e,defaultTab:t,children:r,...n}){return(0,s.jsxs)(f.A,{...n,children:[(0,s.jsx)(j.t,{tabs:e,defaultTab:t}),r]})}var C=r(91241);function w(){let{t:e}=(0,x.Bd)(),{data:t,isLoading:r,error:n,refetch:l}=h.iw.useGetAll({query:{includeDetails:!0,sort:"desc"}}),{data:c,isLoading:p,error:u,refetch:m}=h.Mg.useGetAll({query:{includeDetails:!0,sort:"desc"}}),{isOpen:g,open:f,close:j}=(0,C.u)(),{isOpen:w,open:q,close:A}=(0,C.u)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v,{activeSection:o.w.Departments,isLoading:r||p,error:n||u,toolbar:{title:`${e("entities.department.plural")} & ${e("entities.role.plural")}`,actions:[{key:"add-department",label:e("entities.department.create"),color:"blue",icon:(0,s.jsx)(d.ymh,{size:14}),onClick:f},{key:"add-role",label:e("entities.role.create"),color:"sky",icon:(0,s.jsx)(d.vWM,{size:14}),onClick:q}]},tabs:[{key:"departments",label:e("entities.department.plural"),icon:(0,s.jsx)(d.YXz,{}),count:t?.length,content:(0,s.jsx)(b,{departments:t??[],withActions:!0,refetch:l}),noContentMessage:e("states.notFound.title",{entity:e("common.entities.department")})},{key:"roles",label:e("entities.role.plural"),icon:(0,s.jsx)(d.p7b,{}),textColor:"text-sky-600",count:c?.length,content:(0,s.jsx)(y,{roles:c??[],withActions:!0,refetch:m}),noContentMessage:e("states.notFound.title",{entity:e("common.entities.role")})}]}),(0,s.jsx)(a.h,{open:g,onClose:j,onRefresh:l}),(0,s.jsx)(i.F,{open:w,onClose:A,onRefresh:m})]})}},51455:e=>{"use strict";e.exports=require("node:fs/promises")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},56857:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=r(5853),n=r(60554),o=r(30708),a=r.n(o),i=r(8067),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d={children:["",{children:["(routes)",{children:["departments",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1338)),"/home/madeandenis/web-projects/crs/dashboard/src/app/(routes)/departments/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,7973)),"/home/madeandenis/web-projects/crs/dashboard/src/app/(routes)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,92192,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,82137,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,48358,23)),"next/dist/client/components/unauthorized-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,25347)),"/home/madeandenis/web-projects/crs/dashboard/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,92192,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,82137,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,48358,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/home/madeandenis/web-projects/crs/dashboard/src/app/(routes)/departments/page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/(routes)/departments/page",pathname:"/departments",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},57975:e=>{"use strict";e.exports=require("node:util")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73024:e=>{"use strict";e.exports=require("node:fs")},74075:e=>{"use strict";e.exports=require("zlib")},76760:e=>{"use strict";e.exports=require("node:path")},77598:e=>{"use strict";e.exports=require("node:crypto")},78474:e=>{"use strict";e.exports=require("node:events")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},94735:e=>{"use strict";e.exports=require("events")},97970:(e,t,r)=>{Promise.resolve().then(r.bind(r,49514))}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[949,624,317,881,769,550,209,405,90,441,858,621],()=>r(56857));module.exports=s})();