(()=>{var e={};e.id=516,e.ids=[516],e.modules={1708:e=>{"use strict";e.exports=require("node:process")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7066:e=>{"use strict";e.exports=require("node:tty")},10369:(e,t,s)=>{"use strict";s.d(t,{b:()=>i});var r=s(28625);s(64996);let i=({items:e,renderItem:t,emptyMessage:s,minHeight:i=200})=>(0,r.jsx)("div",{className:"p-4 items-center justify-center",style:{minHeight:i},children:e&&e.length>0?(0,r.jsx)("div",{className:"flex flex-wrap gap-4",children:e.map(t)}):(0,r.jsx)("div",{className:"text-gray-500 text-sm text-center",children:s})})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},16596:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(20413).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/madeandenis/web-projects/crs/dashboard/src/app/(routes)/tickets/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/madeandenis/web-projects/crs/dashboard/src/app/(routes)/tickets/page.tsx","default")},16698:e=>{"use strict";e.exports=require("node:async_hooks")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31421:e=>{"use strict";e.exports=require("node:child_process")},33873:e=>{"use strict";e.exports=require("path")},48161:e=>{"use strict";e.exports=require("node:os")},51455:e=>{"use strict";e.exports=require("node:fs/promises")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},57975:e=>{"use strict";e.exports=require("node:util")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73024:e=>{"use strict";e.exports=require("node:fs")},74075:e=>{"use strict";e.exports=require("zlib")},76760:e=>{"use strict";e.exports=require("node:path")},77598:e=>{"use strict";e.exports=require("node:crypto")},78474:e=>{"use strict";e.exports=require("node:events")},79417:(e,t,s)=>{"use strict";s.d(t,{M:()=>i});var r=s(64996);function i(e,t){let[s,i]=(0,r.useState)(e);return{viewType:s,setViewType:i,toggleView:()=>{if(t&&t.length>1){let e=(t.indexOf(s)+1)%t.length;i(t[e])}},is:e=>s===e}}},79480:(e,t,s)=>{Promise.resolve().then(s.bind(s,16596))},79551:e=>{"use strict";e.exports=require("url")},80681:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>l});var r=s(5853),i=s(60554),n=s(30708),a=s.n(n),o=s(8067),c={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);s.d(t,c);let l={children:["",{children:["(routes)",{children:["tickets",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,16596)),"/home/madeandenis/web-projects/crs/dashboard/src/app/(routes)/tickets/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,7973)),"/home/madeandenis/web-projects/crs/dashboard/src/app/(routes)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,92192,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,82137,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,48358,23)),"next/dist/client/components/unauthorized-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,25347)),"/home/madeandenis/web-projects/crs/dashboard/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,92192,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,82137,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,48358,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["/home/madeandenis/web-projects/crs/dashboard/src/app/(routes)/tickets/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/(routes)/tickets/page",pathname:"/tickets",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},86965:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(37686),i=s(28625);let n=(0,r.A)([(0,i.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,i.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime")},89208:(e,t,s)=>{Promise.resolve().then(s.bind(s,97377))},94735:e=>{"use strict";e.exports=require("events")},97377:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>D});var r=s(28625),i=s(64996),n=s(95942),a=s(43269),o=s(91241),c=s(79417),l=s(56773),d=s(42419),u=s(86965),x=s(77464),p=s(37686);let m=(0,p.A)((0,r.jsx)("path",{d:"M21 8V7l-3 2-3-2v1l3 2zm1-5H2C.9 3 0 3.9 0 5v14c0 1.1.9 2 2 2h20c1.1 0 1.99-.9 1.99-2L24 5c0-1.1-.9-2-2-2M8 6c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3m6 12H2v-1c0-2 4-3.1 6-3.1s6 1.1 6 3.1zm8-6h-8V6h8z"}),"ContactMail");var h=s(54836),b=s(67832),j=s(54055);let f=(e,t,s,i)=>(0,r.jsxs)("div",{className:"flex flex-col cursor-pointer group",title:t,children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-md group-hover:border-opacity-60 transition-colors duration-150",children:[(0,r.jsx)("div",{className:"text-sm opacity-70",children:i}),(0,r.jsx)("span",{className:"font-semibold text-gray-600 text-base tabular-nums",children:s.toLocaleString()})]}),(0,r.jsx)("span",{className:"text-gray-600 text-xs font-medium px-1",children:e})]}),v={REGISTERED:{label:"entities.ticket.statusGroups.registered.label",description:"entities.ticket.statusGroups.registered.description",icon:(0,r.jsx)(u.A,{sx:{fontSize:20}}),textColor:"text-blue-500",renderTab:(e,t)=>f(t("entities.ticket.statusGroups.registered.label"),t("entities.ticket.statusGroups.registered.description"),e,(0,r.jsx)(u.A,{sx:{fontSize:20}}))},IN_PROGRESS:{label:"entities.ticket.statusGroups.inProgress.label",description:"entities.ticket.statusGroups.inProgress.description",icon:(0,r.jsx)(x.A,{sx:{fontSize:20}}),textColor:"text-sky-500",renderTab:(e,t)=>f(t("entities.ticket.statusGroups.inProgress.label"),t("entities.ticket.statusGroups.inProgress.description"),e,(0,r.jsx)(x.A,{sx:{fontSize:20}}))},WAITING_CLIENT:{label:"entities.ticket.statusGroups.waitingClient.label",description:"entities.ticket.statusGroups.waitingClient.description",icon:(0,r.jsx)(m,{sx:{fontSize:20}}),textColor:"text-amber-500",renderTab:(e,t)=>f(t("entities.ticket.statusGroups.waitingClient.label"),t("entities.ticket.statusGroups.waitingClient.description"),e,(0,r.jsx)(m,{sx:{fontSize:20}}))},RESOLVED:{label:"entities.ticket.statusGroups.resolved.label",description:"entities.ticket.statusGroups.resolved.description",icon:(0,r.jsx)(h.A,{sx:{fontSize:20}}),textColor:"text-green-500",renderTab:(e,t)=>f(t("entities.ticket.statusGroups.resolved.label"),t("entities.ticket.statusGroups.resolved.description"),e,(0,r.jsx)(h.A,{sx:{fontSize:20}}))},CANCELLED:{label:"entities.ticket.statusGroups.canceled.label",description:"entities.ticket.statusGroups.canceled.description",icon:(0,r.jsx)(b.A,{sx:{fontSize:20}}),textColor:"text-red-500",renderTab:(e,t)=>f(t("entities.ticket.statusGroups.canceled.label"),t("entities.ticket.statusGroups.canceled.description"),e,(0,r.jsx)(b.A,{sx:{fontSize:20}}))}},N={[j.OrderStatus.NEW]:"REGISTERED",[j.OrderStatus.TAKEN]:"REGISTERED",[j.OrderStatus.IN_PROGRESS]:"IN_PROGRESS",[j.OrderStatus.IN_TESTING]:"IN_PROGRESS",[j.OrderStatus.APPROVED]:"WAITING_CLIENT",[j.OrderStatus.CONTACT_CLIENT]:"WAITING_CLIENT",[j.OrderStatus.WAITING_CLIENT]:"WAITING_CLIENT",[j.OrderStatus.COMPLETED]:"RESOLVED",[j.OrderStatus.DELIVERED]:"RESOLVED",[j.OrderStatus.CANCELLED]:"CANCELLED"};var g=s(10369);let k=(0,p.A)((0,r.jsx)("path",{d:"M19 3H4.99c-1.11 0-1.98.89-1.98 2L3 19c0 1.1.88 2 1.99 2H19c1.1 0 2-.9 2-2V5c0-1.11-.9-2-2-2m0 12h-4c0 1.66-1.35 3-3 3s-3-1.34-3-3H4.99V5H19z"}),"Inbox");var y=s(79155),E=s(36863),C=s(22070),S=s(77896),G=s(60868),A=s(25226),T=s(11107),q=s(89436),w=s(43660),I=s(84667),P=s(93200),O=s(65482),_=s(62173);let R=({ticket:e,onTicketChange:t})=>{let{t:s}=(0,y.Bd)(),i=(0,T.useRouter)();return(0,r.jsx)(S.A,{sx:{width:280},elevation:2,children:(0,r.jsxs)(G.A,{className:"space-y-3 p-4 cursor-pointer",onClick:()=>{i.push(`/tickets/${e.id}`)},children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"border bg-black/5 border-black/20 py-1 px-2 rounded-lg",children:(0,r.jsx)(_.kW,{status:e.status,size:20})}),(0,r.jsxs)("div",{className:"flex items-center text-blue-600",children:[(0,r.jsx)(q.KZj,{size:20}),(0,r.jsx)("span",{className:"text-lg font-bold",children:e.id})]})]}),"URGENT"===e.priority&&(0,r.jsx)(w.GIx,{size:20,color:"#ca212a"})]}),(0,r.jsx)(A.A,{}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,r.jsxs)("span",{className:"text-graphite/80",children:[s("common.fields.status"),":"]}),(0,r.jsx)(O.V,{currentState:e.status,ticketId:e.id,onStateChange:()=>t?.()})]}),(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsxs)("p",{className:"text-graphite/80 mb-1",children:[s("entities.ticket.equipment"),":"]}),(0,r.jsx)("div",{className:"p-2 text-sm font-medium text-black/90 bg-black/5 rounded-md",children:e.equipmentDescription})]}),e.observations&&(0,r.jsxs)("div",{className:"text-sm",children:[(0,r.jsxs)("p",{className:"text-graphite/80 mb-1",children:[s("common.fields.observations"),":"]}),(0,r.jsx)("div",{className:"p-2 text-xs text-black/90 bg-black/5 rounded-md",children:e.observations})]}),(0,j.isExpandedTicket)(e)&&(0,r.jsx)("div",{className:"text-sm space-y-2 py-2",children:(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-2 space-y-1",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("span",{className:"text-graphite/80 font-medium",children:[s("common.entities.client"),":"]}),(0,r.jsx)("span",{className:"font-semibold text-blue-900",children:(e=>"COMPANY"===e.type&&e.company?e.company.name:"PERSON"===e.type&&e.person?e.person.fullName:s("entities.ticket.missingClient"))(e.client)})]}),e.representative&&(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("span",{className:"text-graphite/80 font-medium",children:[s("common.entities.representative"),":"]}),(0,r.jsx)("span",{className:"font-semibold text-blue-900",children:e.representative.person.fullName})]})]})}),(0,j.isExpandedTicket)(e)&&e.employees&&e.employees.length>0&&(0,r.jsx)("div",{className:"text-sm",children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("span",{className:"text-graphite/80",children:[s("common.entities.employee",{count:2}),":"]}),(0,r.jsx)("div",{className:"rounded-md border border-gray-300 overflow-hidden",children:e.employees.map((t,s)=>(0,r.jsx)("div",{className:`px-2 py-1 text-sm font-medium text-black ${s!==e.employees.length-1?"border-b border-gray-300":""}`,children:t.fullName},t.id))})]})}),(0,r.jsxs)("div",{className:"text-sm space-y-1",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("span",{className:"text-graphite/80",children:[s("entities.ticket.estimatedCost"),":"]}),(0,r.jsxs)("span",{className:"font-medium text-black",children:[e.estimatedCost," ",s("common.currency")]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("span",{className:"text-graphite/80",children:[s("entities.ticket.finalCost"),":"]}),(0,r.jsxs)("span",{className:"font-medium text-black",children:[e.finalCost," ",s("common.currency")]})]}),e.estimatedExecutionTime&&(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("span",{className:"text-graphite/80",children:[s("entities.ticket.estimatedExecutionTime"),":"]}),(0,r.jsxs)("span",{className:"font-medium text-black",children:[e.estimatedExecutionTime,"h"]})]})]}),(0,r.jsx)("div",{className:"text-sm",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("span",{className:"text-graphite/80",children:[s("entities.ticket.submittedAt"),":"]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"font-medium text-black text-xs",children:new Date(e.submittedAt).toLocaleDateString()}),(0,r.jsx)("div",{className:"text-gray-500 text-xs",children:(0,I.m)(new Date(e.submittedAt),{addSuffix:!0,locale:P.ro})})]})]})})]})})},z=({tickets:e,onTicketChange:t,viewType:s="cards"})=>{let{t:n}=(0,y.Bd)(),[a,o]=(0,i.useState)({});(0,i.useEffect)(()=>{let t={};for(let s of(Object.keys(v).forEach(e=>{t[e]=[]}),e||[]))t[N[s.status]].push(s);o(t)},[e]);let c=[{key:"all",label:n("common.status.all"),icon:(0,r.jsx)(k,{}),count:e.length,content:"cards"===s?(0,r.jsx)(g.b,{items:e,renderItem:e=>(0,r.jsx)(R,{ticket:e,onTicketChange:()=>t?.()},e.id),emptyMessage:n("states.empty.noData")}):(0,r.jsx)(C.Y,{data:e,withActions:!0,onRefresh:t})},...Object.keys(v).map(e=>{let i=a[e]??[],o=v[e],c="cards"===s?(0,r.jsx)(g.b,{items:i,renderItem:e=>(0,r.jsx)(R,{ticket:e,onTicketChange:()=>t?.()},e.id),emptyMessage:n("states.empty.noData")}):(0,r.jsx)(C.Y,{data:i,withActions:!0,onRefresh:t});return{key:e,label:o.renderTab(i.length,n),content:c,textColor:o.textColor}})];return(0,r.jsx)(E.t,{tabs:c})};var L=s(78361);function D(){let{t:e}=(0,y.Bd)(),{data:t,isLoading:s,error:i,refetch:u}=L.qB.useGetAll({query:{includeDetails:!0,sort:"desc"}}),{isOpen:x,open:p,close:m}=(0,o.u)(),{viewType:h,toggleView:b,is:j}=(0,c.M)("table",["table","cards"]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.A,{activeSection:n.w.Tickets,isLoading:s,error:i,toolbar:{title:e("entities.ticket.plural"),actions:[{key:"add-ticket",label:e("common.actions.add"),icon:(0,r.jsx)(a.OiG,{}),onClick:p},{key:"toggle-view",label:e(j("table")?"common.ui.cards":"common.ui.table"),color:"white",icon:j("table")?(0,r.jsx)(a.QJV,{}):(0,r.jsx)(a.ist,{}),onClick:b}]},children:t&&(0,r.jsx)(z,{tickets:t,viewType:h,onTicketChange:u})}),(0,r.jsx)(d.Z,{open:x,variant:"modal",onClose:m,onSuccess:u})]})}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[949,624,317,881,769,550,209,812,405,90,441,858,621],()=>s(80681));module.exports=r})();