"use strict";exports.id=621,exports.ids=[621],exports.modules={22070:(e,t,s)=>{s.d(t,{Y:()=>N});var i=s(28625),n=s(64996),a=s(79155),l=s(11107),o=s(85655),r=s(36661),c=s(93901),d=s(43660),m=s(84667),x=s(93200),p=s(15316),g=s(88568),u=s(42419),h=s(65482),b=s(19105),y=s(73625),j=s(77402),f=s(78361),v=s(85764);let N=({data:e,options:t,withActions:s,onRefresh:N})=>{let{t:k}=(0,a.Bd)(),w=(0,l.useRouter)(),[C,A]=(0,n.useState)(new Set),[D,S]=(0,n.useState)(null),[z,R]=(0,n.useState)([]),F=f.qB.useDelete({},{onSuccess:()=>N?.()}),E=f.qB.useDeleteMany({},{onSuccess:()=>N?.()}),B=e=>{A(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},T=e=>{w.push(`/tickets/${e.id}`)},$=e=>{R(Array.isArray(e)?e:[e])},L=e=>{let t=e.client;return t?"COMPANY"===t.type?t.company?.name||k("entities.ticket.missingClient"):"PERSON"===t.type&&t.person?.fullName||k("entities.ticket.missingClient"):k("entities.ticket.missingClient")},I=[{label:k("common.fields.id"),align:"right",sortable:!0,sortFn:(e,t)=>e.id-t.id},{label:k("common.fields.status"),align:"center",sortable:!0,sortFn:(e,t)=>e.status.localeCompare(t.status)},{label:k("entities.ticket.priority"),align:"center",sortable:!0,sortFn:(e,t)=>{let s={URGENT:3,NORMAL:2,LOW:1};return(s[e.priority]||0)-(s[t.priority]||0)}},{label:k("entities.ticket.equipment"),align:"left",sortable:!0,sortFn:(e,t)=>e.equipmentDescription.localeCompare(t.equipmentDescription)},{label:k("common.entities.client"),align:"left",sortable:!0,sortFn:(e,t)=>L(e).localeCompare(L(t))},{label:k("entities.ticket.submittedAt"),align:"right",sortable:!0,sortFn:(e,t)=>new Date(e.submittedAt).getTime()-new Date(t.submittedAt).getTime()},{label:k("entities.ticket.estimatedDeliveryDate"),align:"right",sortable:!0,sortFn:(e,t)=>e.estimatedDeliveryDate||t.estimatedDeliveryDate?e.estimatedDeliveryDate?t.estimatedDeliveryDate?new Date(e.estimatedDeliveryDate).getTime()-new Date(t.estimatedDeliveryDate).getTime():-1:1:0},{label:k("entities.ticket.estimatedCost"),align:"center",sortable:!0,sortFn:(e,t)=>(e.estimatedCost||0)-(t.estimatedCost||0)},{label:k("entities.ticket.finalCost"),align:"center",sortable:!0,sortFn:(e,t)=>(e.finalCost||0)-(t.finalCost||0)},{label:k("entities.employee.plural"),align:"center",sortable:!0,sortFn:(e,t)=>(e.employees?.length||0)-(t.employees?.length||0)}],W=[{render:e=>(0,i.jsx)("div",{className:"px-4 py-2",children:(0,i.jsxs)("span",{className:`text-sm font-medium font-mono px-3 py-1 rounded ${"URGENT"===e.priority?"text-red-700 bg-red-50":"text-gray-600 bg-gray-50"}`,children:["#",e.id]})})},{render:e=>(0,i.jsx)("div",{className:"px-4 py-2",children:(0,i.jsx)(h.V,{currentState:e.status,scale:.9,displayOnly:!0})})},{render:e=>(0,i.jsx)("div",{className:"px-4 py-2 flex justify-center",children:"URGENT"===e.priority?(0,i.jsx)(d.GIx,{size:20,className:"text-red-600"}):(0,i.jsx)(o.A,{label:k(`entities.ticket.priorityLevels.${e.priority.toLowerCase()}`),size:"small",variant:"outlined",className:"capitalize font-semibold text-xs border-gray-300 text-gray-800"})})},{render:e=>(0,i.jsx)("div",{className:"px-4 py-2",children:(0,i.jsx)(r.A,{title:e.equipmentDescription,arrow:!0,children:(0,i.jsx)("div",{className:"text-sm font-medium max-w-xs truncate",children:e.equipmentDescription})})}),className:"bg-zinc-50"},{render:e=>(0,i.jsx)("div",{className:`text-sm truncate font-medium p-4 ${e.client?.type==="COMPANY"?"bg-blue-50 text-blue-950":"bg-green-50 text-green-950"}`,children:L(e)})},{render:e=>(0,i.jsxs)("div",{className:"px-4 py-2 min-w-36",children:[(0,i.jsx)("div",{className:"text-sm",children:new Date(e.submittedAt).toLocaleDateString()}),(0,i.jsx)("div",{className:"text-xs text-gray-500",children:(0,m.m)(new Date(e.submittedAt),{addSuffix:!0,locale:x.ro})})]})},{render:e=>(0,i.jsx)("div",{className:`px-4 py-2 min-w-36 bg-${(0,b.C)(e)}`,children:e.estimatedDeliveryDate?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"text-sm",children:new Date(e.estimatedDeliveryDate).toLocaleDateString()}),(0,i.jsx)("div",{className:"text-xs text-gray-500",children:(0,m.m)(new Date(e.estimatedDeliveryDate),{addSuffix:!0,locale:x.ro})})]}):k("common.fields.empty")})},{render:e=>(0,i.jsx)("div",{className:"px-4 py-2 min-w-[96px]",children:e.estimatedCost?(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 font-medium whitespace-nowrap",children:[(0,i.jsx)(c.H4F,{size:16,className:"flex-shrink-0"}),e.estimatedCost.toFixed(2)]}):(0,i.jsx)("span",{className:"text-gray-400",children:k("common.fields.empty")})})},{render:e=>(0,i.jsx)("div",{className:"px-4 py-2 min-w-[96px]",children:e.finalCost?(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 font-medium whitespace-nowrap",children:[(0,i.jsx)(c.H4F,{size:16,className:"flex-shrink-0"}),e.finalCost.toFixed(2)]}):(0,i.jsx)("span",{className:"text-gray-400",children:k("common.fields.empty")})})},{render:e=>(0,i.jsx)("div",{className:"px-4 py-2",children:e.employees?.length?(0,i.jsx)(y.L,{isExpanded:C.has(e.id),onToggle:t=>{t.stopPropagation(),B(e.id)},count:e.employees.length}):(0,i.jsx)("span",{className:"text-gray-400",children:k("common.fields.empty")})}),expandedContent:{render:e=>C.has(e.id)&&e.employees?.length&&(0,i.jsx)(j.Q,{employees:e.employees||[],tableProps:{ignoreColumns:[5],pagination:{enabled:!1},search:{enabled:!1}}}),onClose:e=>B(e.id)},className:"px-6"}],Y=s?[{icon:(0,i.jsx)(c.Yvo,{size:16}),onRowAction:e=>S(e)},{icon:(0,i.jsx)(c.b6i,{size:16}),onRowAction:e=>$(e),onBulkAction:e=>$(e)},{label:k("common.actions.view"),icon:(0,i.jsx)(c.U3x,{size:16}),onRowAction:T},{label:k("entities.ticket.assignEmployees"),icon:(0,i.jsx)(c.WZZ,{size:16}),onRowAction:e=>console.log("Assign ticket",e.id)},{label:k("common.actions.close"),icon:(0,i.jsx)(c.mU9,{size:16}),onRowAction:e=>console.log("Close ticket",e.id),onBulkAction:e=>console.log("Bulk close tickets")},{label:k("common.actions.reopen"),icon:(0,i.jsx)(c.m6K,{size:16}),onRowAction:e=>console.log("Reopen ticket",e.id),onBulkAction:e=>console.log("Bulk reopen tickets")}]:[],M=(0,i.jsx)(p.W,{data:e,actions:Y,headerColumns:I,dataColumns:W,onRowDoubleClick:T,ignoreColumns:t?.ignoreColumns,...t});return s?(0,i.jsxs)(i.Fragment,{children:[M,D&&(0,i.jsx)(u.Z,{open:!0,ticket:D,variant:"modal",onSuccess:N,onClose:()=>S(null)}),(0,i.jsx)(g.C,{open:z.length>0,items:z,itemName:k("common.entities.ticket"),getIdentifier:e=>e?.id?`#${e.id}`:"",onConfirm:e=>{(0,v.Y)(e,F.mutate,E.mutate),R([])},onCancel:()=>R([])})]}):M}},56773:(e,t,s)=>{s.d(t,{A:()=>c});var i=s(28625);s(64996);var n=s(95942),a=s(23);let l=({title:e,titleIcon:t,actions:s=[],className:n=""})=>{let l=!!e||!!t;return(0,i.jsxs)("div",{className:`p-4 flex items-center border-b border-gray-200 bg-white ${l?"justify-between":"justify-start"} ${n}`,children:[(0,i.jsxs)("h1",{className:"text-xl font-semibold text-graphite flex items-center gap-2",children:[t,e]}),(0,i.jsx)("div",{className:"flex gap-2",children:s.map(e=>(0,i.jsx)(a.r,{label:e.label,color:e.color,icon:e.icon,className:e.className,onClick:e.onClick},e.key))})]})};var o=s(15469),r=s(79155);function c({activeSection:e,children:t,isLoading:s=!1,error:a,toolbar:c={},className:d=""}){let{t:m}=(0,r.Bd)();return(0,i.jsxs)("div",{className:"flex min-h-screen",children:[(0,i.jsx)(n.A,{activeSection:e}),(0,i.jsxs)("div",{className:`flex-grow overflow-x-hidden ${d}`,children:[c.actions&&c.actions?.length>0&&(0,i.jsx)(l,{title:c.title,titleIcon:c.titleIcon,actions:c.actions,className:c.className}),(0,i.jsxs)("div",{className:"p-4",children:[s&&(0,i.jsx)(o.k,{message:m("common.status.loading")}),a&&(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center animate-fadeIn",children:[(0,i.jsx)("div",{className:"rounded-full bg-red-50 p-3 mb-4",children:(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,i.jsx)("h2",{className:"text-lg font-medium text-gray-800 mb-1",children:m("common.ui.error.title")}),(0,i.jsx)("p",{className:"text-sm text-gray-500 max-w-md mb-4",children:m("common.ui.error.description")}),(0,i.jsx)("button",{onClick:()=>window.location.reload(),className:"px-3 py-1.5 rounded-md border border-gray-200 text-sm text-gray-700 hover:bg-gray-50 transition",children:m("common.actions.retry")})]}),!s&&!a&&(0,i.jsx)("div",{className:"animate-fadeIn",children:t})]})]})]})}},77402:(e,t,s)=>{s.d(t,{Q:()=>b});var i=s(28625),n=s(64996),a=s(11107),l=s(93901),o=s(15316),r=s(88568),c=s(91080),d=s(54055),m=s(19554),x=s(79155),p=s(22070),g=s(73625),u=s(78361),h=s(85764);let b=({employees:e,tableProps:t,withActions:s=!1,refetch:b})=>{let{t:y}=(0,x.Bd)(),[j,f]=(0,n.useState)(new Set),[v,N]=(0,n.useState)(null),[k,w]=(0,n.useState)([]),C=(0,a.useRouter)(),A=u.yD.useDelete({},{onSuccess:()=>b?.()}),D=u.yD.useDeleteMany({},{onSuccess:()=>b?.()}),S=e=>{f(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},z=e=>C.push(`/employees/${e}`),R=e=>{w(Array.isArray(e)?e:[e])},F=[{label:y("common.fields.id"),align:"right",sortable:!0,sortFn:(e,t)=>e.id-t.id},{label:y("entities.employee.fullName"),align:"left",sortable:!0,sortFn:(e,t)=>e.fullName.localeCompare(t.fullName,"ro",{sensitivity:"base"})},{label:y("common.fields.contact"),align:"left"},{label:y("common.entities.role"),align:"left",sortable:!0,sortFn:(e,t)=>(e.role?.name??"").localeCompare(t.role?.name??"","ro",{sensitivity:"base"})},{label:y("common.entities.department"),align:"left",sortable:!0,sortFn:(e,t)=>(e.department?.name??"").localeCompare(t.department?.name??"","ro",{sensitivity:"base"})},{label:y("entities.ticket.plural"),align:"center",sortable:!0,sortFn:(e,t)=>((0,d.isExpandedEmployeeWithTickets)(e)?e.tickets.length:0)-((0,d.isExpandedEmployeeWithTickets)(t)?t.tickets.length:0)}],E=[{render:e=>(0,i.jsx)("div",{className:"px-4 py-2",children:(0,i.jsxs)("span",{className:"text-sm font-mono font-medium bg-gray-50 text-gray-800 px-3 py-1.5 rounded",children:["#",e.id]})})},{render:e=>(0,i.jsx)("div",{className:"px-4 py-2 text-sm truncate font-medium",children:e.fullName||"—"}),className:"bg-zinc-50"},{render:e=>(0,i.jsxs)("div",{className:"px-4 py-2 flex flex-col gap-1 text-sm",children:[e.email?(0,i.jsxs)("a",{href:`mailto:${e.email}`,className:"flex items-center gap-1 text-indigo-600 hover:text-blue-800 truncate",onClick:e=>e.stopPropagation(),children:[(0,i.jsx)(l.mm2,{size:16})," ",e.email]}):(0,i.jsxs)("span",{className:"flex items-center gap-1 text-gray-400",children:[(0,i.jsx)(l.mm2,{size:16}),"—"]}),e.phone?(0,i.jsxs)("a",{href:`tel:${e.phone}`,className:"flex items-center gap-1 text-slate-800 hover:text-blue-800 truncate",onClick:e=>e.stopPropagation(),children:[(0,i.jsx)(l.EZw,{size:16})," ",e.phone]}):(0,i.jsxs)("span",{className:"flex items-center gap-1 text-gray-400",children:[(0,i.jsx)(l.EZw,{size:16}),"—"]})]})},{render:e=>e.role?.name?(0,i.jsxs)("span",{className:"inline-flex items-center gap-2 px-4 py-2 text-xs font-medium text-emerald-800 bg-emerald-100 rounded-md ring-1 ring-emerald-600/20",children:[(0,i.jsx)(l.r72,{size:14,className:"flex-shrink-0"}),(0,m.wR)(e.role.name)]}):(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 px-4 py-2 text-xs text-gray-600 bg-gray-100 rounded-md ring-1 ring-gray-300/20",children:[(0,i.jsx)(l.r72,{size:14,className:"flex-shrink-0"}),y("common.fields.empty")]}),className:"px-2"},{render:e=>e.department?.name?(0,i.jsxs)("span",{className:"inline-flex items-center gap-2 px-4 py-2 text-xs font-medium text-blue-800 bg-blue-100 rounded-md ring-1 ring-blue-600/20",children:[(0,i.jsx)(l.YG2,{size:14,className:"flex-shrink-0"}),(0,m.wR)(e.department.name)]}):(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 px-4 py-2 text-xs text-gray-600 bg-gray-100 rounded-md ring-1 ring-gray-300/20",children:[(0,i.jsx)(l.YG2,{size:14,className:"flex-shrink-0"}),y("common.fields.empty")]})},{render:e=>(0,d.isExpandedEmployeeWithTickets)(e)&&e.tickets?.length?(0,i.jsx)(g.L,{isExpanded:j.has(e.id),onToggle:t=>{t.stopPropagation(),S(e.id)},count:e.tickets.length}):(0,i.jsx)("span",{className:"text-gray-400",children:"—"}),expandedContent:{render:e=>(0,d.isExpandedEmployeeWithTickets)(e)&&j.has(e.id)&&e.tickets?.length?(0,i.jsx)(p.Y,{data:e.tickets,options:{ignoreColumns:[10],classNames:{container:"rounded-md overflow-x-auto shadow-xl border border-gray-200"},search:{enabled:!1}}}):null,onClose:e=>S(e.id)},className:"px-6"}],B=s?[{icon:(0,i.jsx)(l.Yvo,{size:16}),onRowAction:e=>N(e)},{icon:(0,i.jsx)(l.b6i,{size:16}),onRowAction:e=>R(e),onBulkAction:e=>R(e)},{label:y("common.actions.view"),icon:(0,i.jsx)(l.U3x,{size:16}),onRowAction:e=>z(e.id)}]:void 0;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.W,{data:e,actions:B,headerColumns:F,dataColumns:E,...t}),v&&(0,i.jsx)(c.N,{open:!0,employee:v,variant:"modal",onClose:()=>N(null),onRefresh:b}),(0,i.jsx)(r.C,{open:k.length>0,items:k,itemName:y("common.entities.employee"),getIdentifier:e=>e?.id?`#${e.id}`:"",onConfirm:e=>{(0,h.Y)(e,A.mutate,D.mutate),w([])},onCancel:()=>w([])})]})}},91241:(e,t,s)=>{s.d(t,{u:()=>n});var i=s(64996);function n(e=!1){let[t,s]=(0,i.useState)(e);return{isOpen:t,setIsOpen:s,open:()=>s(!0),close:()=>s(!1),toggle:()=>s(e=>!e)}}},95942:(e,t,s)=>{s.d(t,{A:()=>R,w:()=>S});var i=s(28625),n=s(64996),a=s.n(n),l=s(11107),o=s(73338),r=s(43465),c=s(80015),d=s(25226),m=s(12443),x=s(36661),p=s(47025),g=s(52216),u=s(49764),h=s(79120),b=s(83458),y=s(25025),j=s(3475),f=s(87414),v=s(67132),N=s(77464),k=s(91368),w=s(41465),C=s(56459),A=s(57053),D=s(79155),S=function(e){return e.Dashboard="navigation.sidebar.dashboard",e.Tickets="navigation.sidebar.tickets",e.Clients="navigation.sidebar.clients",e.Employees="navigation.sidebar.employees",e.Departments="navigation.sidebar.departments",e.Products="navigation.sidebar.products",e.Services="navigation.sidebar.services",e.Billing="navigation.sidebar.billing",e.Reports="navigation.sidebar.reports",e.Settings="navigation.sidebar.settings",e}({});let z=[{text:"navigation.sidebar.dashboard",icon:(0,i.jsx)(h.A,{}),path:"/dashboard"},{text:"navigation.sidebar.tickets",icon:(0,i.jsx)(b.A,{}),path:"/tickets"},{text:"navigation.sidebar.clients",icon:(0,i.jsx)(y.A,{}),path:"/clients"},{text:"navigation.sidebar.employees",icon:(0,i.jsx)(j.A,{}),path:"/employees"},{text:"navigation.sidebar.departments",icon:(0,i.jsx)(f.A,{}),path:"/departments"},{text:"navigation.sidebar.products",icon:(0,i.jsx)(v.A,{}),path:"/products"},{text:"navigation.sidebar.services",icon:(0,i.jsx)(N.A,{}),path:"/services"},{text:"navigation.sidebar.billing",icon:(0,i.jsx)(k.A,{}),path:"/billing"},{text:"navigation.sidebar.reports",icon:(0,i.jsx)(w.A,{}),path:"/reports"},{text:"navigation.sidebar.settings",icon:(0,i.jsx)(C.A,{}),path:"/settings"}];function R({activeSection:e}){let[t,s]=a().useState(!1),n=(0,l.useRouter)(),{t:h}=(0,D.Bd)();return(0,i.jsxs)(o.Ay,{variant:"permanent",open:t,sx:{width:t?240:60,flexShrink:0,"& .MuiDrawer-paper":{width:t?240:60,boxSizing:"border-box",overflowX:"hidden",transition:"width 0.3s"}},children:[(0,i.jsx)(r.A,{sx:{display:"flex",alignItems:"center",justifyContent:t?"flex-end":"center",padding:"8px 12px"},children:(0,i.jsx)(c.A,{onClick:()=>s(!t),size:"small",children:(0,i.jsx)(A.A,{})})}),(0,i.jsx)(d.A,{}),(0,i.jsx)(m.A,{children:z.map(({text:s,icon:a,path:l})=>{let o=s===e;return(0,i.jsx)(x.A,{title:t?"":h(s),placement:"right",arrow:!0,children:(0,i.jsxs)(p.A,{onClick:()=>n.push(l),selected:o,sx:{justifyContent:t?"initial":"center",px:2.5,bgcolor:o?"primary.main":"inherit",color:o?"common.black":"text.primary","& .MuiListItemIcon-root":{color:o?"common.black":"text.secondary",minWidth:0,mr:t?3:"auto",justifyContent:"center"},"&:hover":{bgcolor:o?"primary.dark":"action.hover"}},children:[(0,i.jsx)(g.A,{children:a}),t&&(0,i.jsx)(u.A,{primary:h(s)})]})},s)})})]})}}};