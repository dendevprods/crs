"use strict";exports.id=858,exports.ids=[858],exports.modules={1095:(e,t,s)=>{s.d(t,{A:()=>a});var l=s(28625),r=s(64996);function a({defaultMinutes:e=0,onChange:t}){let[s,a]=(0,r.useState)(0),[i,n]=(0,r.useState)(0);return(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)("div",{className:"space-x-1",children:[(0,l.jsx)("input",{type:"number",value:String(s).padStart(2,"0"),onChange:e=>a(Math.max(0,Math.min(100,parseInt(e.target.value)||0))),className:"w-18 p-3 border border-gray-300 rounded-md text-base focus:outline-none focus:border-black/70",placeholder:"00",min:"0",max:"100"}),(0,l.jsx)("span",{className:"text-md text-gray-500",children:"h"})]}),(0,l.jsxs)("div",{className:"space-x-1",children:[(0,l.jsx)("input",{type:"number",value:String(i).padStart(2,"0"),onChange:e=>n(Math.max(0,Math.min(59,parseInt(e.target.value)||0))),className:"w-18 p-3 border border-gray-300 rounded-md text-base focus:outline-none focus:border-black/70",placeholder:"00",min:"0",max:"59"}),(0,l.jsx)("span",{className:"text-md text-gray-500",children:"m"})]})]})}},19105:(e,t,s)=>{s.d(t,{C:()=>l});let l=(e,t=100)=>{let s=new Date,l=e.estimatedDeliveryDate?new Date(e.estimatedDeliveryDate):null;if(!l)return"";let r=l<s,a="COMPLETED"===e.status,i="DELIVERED"===e.status,n="CANCELLED"===e.status,o="CONTACT_CLIENT"===e.status||"WAITING_CLIENT"===e.status;return i?`green-${t}`:n?`gray-${t}`:a&&r?`yellow-${t}`:o?r?`orange-${t}`:`yellow-${t}`:!r||a||i||o||n?"":`red-${t}`}},40145:(e,t,s)=>{s.d(t,{d:()=>r});var l=s(28625);s(64996);let r=({label:e,value:t,icon:s,gap:r="gap-3",iconSize:a="w-8 h-8",textSize:i="text-sm",labelSize:n="text-xs"})=>(0,l.jsxs)("div",{className:`flex items-center ${r}`,children:[(0,l.jsx)("div",{className:`${a} bg-gray-100 rounded-lg flex items-center justify-center flex-shrink-0`,children:s}),(0,l.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,l.jsx)("p",{className:`font-medium text-gray-700 truncate ${i}`,children:t}),(0,l.jsx)("p",{className:`${n} text-gray-500`,children:e})]})]})},42419:(e,t,s)=>{s.d(t,{Z:()=>X});var l=s(28625),r=s(64996),a=s.n(r),i=s(79155),n=s(19347),o=s(79285),d=s(25226),c=s(17346),m=s(763),x=s(35969),u=s(14902),p=s(31861),h=s(80015),j=s(43269),v=s(93901),b=s(34881),g=s(54055),f=s(53827),y=s(54340),N=s(12611),A=s(8964),C=s(22380),E=s(36131),S=s(70732),k=s(70333),D=s(40145);let z=({person:e,isRepresentative:t,onClick:s,...r})=>{let{t:a}=(0,i.Bd)();return(0,l.jsxs)(k.X,{...r,title:e.fullName,icon:(0,l.jsx)("span",{className:"flex items-center gap-1",children:t?(0,l.jsx)(E.A,{fontSize:"inherit"}):(0,l.jsx)(N.A,{fontSize:"inherit"})}),color:"green",onClick:s,children:[e.phone&&(0,l.jsx)(D.d,{label:a("common.fields.phone"),value:e.phone,icon:(0,l.jsx)(A.A,{fontSize:"inherit"})}),e.email&&(0,l.jsx)(D.d,{label:a("common.fields.email"),value:e.email,icon:(0,l.jsx)(C.A,{fontSize:"inherit"})}),e.address&&(0,l.jsx)(D.d,{label:a("common.fields.address"),value:e.address,icon:(0,l.jsx)(S.A,{fontSize:"inherit"})})]})};var w=s(54024),R=s(82830),F=s(25025);let T=({company:e,onSelectCompany:t,onSelectRepresentative:s,showRepresentatives:r=!0,...a})=>{let{t:n}=(0,i.Bd)();return(0,l.jsxs)(k.X,{...a,title:e.name,icon:(0,l.jsx)(w.A,{fontSize:"inherit"}),onClick:()=>t?.(e),color:"blue",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[e.phone&&(0,l.jsx)(D.d,{icon:(0,l.jsx)(A.A,{fontSize:"inherit",className:"text-gray-600"}),value:e.phone,label:n("common.fields.phone")}),e.email&&(0,l.jsx)(D.d,{icon:(0,l.jsx)(C.A,{fontSize:"inherit",className:"text-gray-600"}),value:e.email,label:n("common.fields.email")}),e.headquarters&&(0,l.jsx)(D.d,{icon:(0,l.jsx)(S.A,{fontSize:"inherit",className:"text-gray-600"}),value:e.headquarters,label:n("common.fields.headquarters")}),e.taxId&&(0,l.jsx)(D.d,{icon:(0,l.jsx)(R.A,{fontSize:"inherit",className:"text-gray-600"}),value:e.taxId,label:n("entities.company.taxId")})]}),r&&(0,g.isExpandedCompany)(e)&&e.representatives.length>0&&(0,l.jsxs)("div",{className:"flex items-start gap-3 pt-4",children:[(0,l.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,l.jsx)(F.A,{fontSize:"inherit",className:"text-blue-600"})}),(0,l.jsxs)("div",{className:"min-w-0 flex-1 px-3 py-2 bg-gray-100 rounded-lg",children:[(0,l.jsxs)("p",{className:"text-xs text-gray-500 mb-2",children:[n("common.entities.representatives")," (",e.representatives.length,")"]}),(0,l.jsx)("div",{className:"space-y-2",children:e.representatives.map(e=>(0,l.jsx)("div",{onClick:t=>{t.stopPropagation(),s?.(e)},children:(0,l.jsx)(z,{person:e.person,size:"xs"})},e.personId))})]})]})]})},O=({client:e,onSelectClient:t,onSelectRepresentative:s,showRepresentatives:r=!1,...a})=>(0,g.isExpandedClient)(e)?"PERSON"===e.type&&e.person?(0,l.jsxs)("div",{children:[(0,l.jsx)(z,{...a,person:e.person,onClick:()=>t?.(e)}),(0,l.jsx)(d.A,{orientation:"horizontal"})]}):"COMPANY"===e.type&&e.company?(0,l.jsxs)("div",{children:[(0,l.jsx)(T,{...a,company:e.company,onSelectCompany:()=>t?.(e),onSelectRepresentative:t=>s?.(e,t),showRepresentatives:r}),(0,l.jsx)(d.A,{orientation:"horizontal"})]}):null:null;var I=s(24098),V=s(9249),B=s(36317),L=s(67173),q=s(12178);let $=({clientSearchType:e,clients:t,onSelectClient:s,onSelectRepresentative:a,resultsVisible:n=!0,setResultsVisibility:o})=>{let{t:d}=(0,i.Bd)(),[c,m]=(0,r.useState)(!1),x=d("entities.client.searchKeys",{returnObjects:!0});if(!t)return null;if(0===t.length)return(0,l.jsxs)("div",{className:"flex flex-col items-center justify-between gap-3 h-full py-8 px-4 mt-4 bg-gray-50 border border-gray-200 rounded-lg",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,l.jsxs)("div",{className:"flex flex-col gap-1 items-center justify-center",children:[(0,l.jsx)("p",{className:"text-gray-500 text-sm font-medium",children:d("common.ui.noResults")}),(0,l.jsx)("p",{className:"text-gray-400 text-xs",children:d("common.ui.tryDifferentSearch")})]})]}),(0,l.jsx)("div",{className:"flex flex-col gap-4",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs text-gray-500 font-medium mb-1",children:d("common.ui.searchCriteria")}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:x.map(e=>(0,l.jsx)("span",{className:"bg-blue-100 text-blue-700 text-xs font-medium px-3 py-1 rounded-full border border-blue-200",children:e},e))})]})}),(0,l.jsx)(I.A,{variant:"outlined",size:"small",startIcon:(0,l.jsx)(B.zHz,{}),sx:{borderColor:"#87b3fa",color:"#3B82F6",textTransform:"none",fontSize:"0.85rem",borderRadius:"8px",px:2.5,py:1,mt:4,backgroundColor:"#EFF6FF","&:hover":{borderColor:"#3B82F6"}},onClick:()=>m(!0),children:d("entities.client.create")}),(0,l.jsx)(V.M,{open:c,variant:"modal",onClose:()=>m(!1)})]});let u=t.filter(t=>t.type===e);return 0===u.length?null:(0,l.jsxs)("div",{className:"mt-4 ml-1",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:d("common.fields.results")}),(0,l.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800 border border-indigo-200",children:[u.length," ",(u.length,d("common.entities.client"))]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsxs)("div",{className:"text-xs text-gray-500",children:[d("common.fields.type"),": ",d("PERSON"===e?"entities.client.individual":"entities.client.company")]}),(0,l.jsx)(I.A,{variant:"outlined",size:"small",startIcon:n?(0,l.jsx)(L.A,{}):(0,l.jsx)(q.A,{}),onClick:()=>o?.(!n),sx:{textTransform:"none",fontSize:"0.75rem",minWidth:"auto",padding:"4px 8px"},children:d(n?"common.actions.hide":"common.actions.show")})]})]}),n&&(0,l.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden max-h-96 overflow-y-auto",children:[u.map(e=>(0,l.jsx)(O,{client:e,onSelectClient:e=>{o?.(!1),s(e)},onSelectRepresentative:(e,t)=>{o?.(!1),a(e,t)},showRepresentatives:!0,size:"sm"},e.id)),(0,l.jsx)("div",{className:"flex justify-center items-center py-3 bg-gray-50",children:(0,l.jsx)(I.A,{variant:"text",size:"small",startIcon:(0,l.jsx)(B.zHz,{}),onClick:()=>m(!0),style:{padding:"8px 16px",textTransform:"none",fontSize:"0.9rem",color:"#3B82F6"},children:d("entities.client.create")})})]}),(0,l.jsx)(V.M,{open:c,variant:"modal",onClose:()=>m(!1)})]})};var M=s(51287),W=s(54527),P=s(1095),Q=s(78361),G=s(81389),U=s(22349);let H=({defaultValues:e=(0,g.getDefaultTicketForm)(),initialValues:t,onClose:s,onSuccess:l})=>{let r=(0,U.A)({itemName:"Ticket",initialValues:t,defaultValues:e,itemId:t?.id,onClose:s,onSuccess:l,createRecord:Q.qB.create,updateRecord:Q.qB.update,getCreateDto:g.convertTicketFormToDto,getUpdateDto:g.convertTicketFormToDto,validator:g.validateTicketForm});return{form:r,handlers:{updateField:(e,t)=>r.setValues(e,t),handleSelectClient:e=>{r.setValues("client",e),r.setValues("representative",null)},handleRemoveClient:()=>{r.setValues("client",null),r.setValues("representative",null)},handleSelectRepresentative:(e,t)=>{r.setValues("client",e),r.setValues("representative",t)},handleRemoveRepresentative:()=>{r.setValues("representative",null)},handleSelectEmployee:e=>{r.values.employees.some(t=>t.id===e.id)||r.setValues("employees",[...r.values.employees,e])},handleRemoveEmployee:e=>{r.setValues("employees",r.values.employees.filter(t=>t.id!==e))}}}};var _=s(19554);let X=({open:e,ticket:t,variant:s,onSuccess:N,onClose:A})=>{let{t:C}=(0,i.Bd)(),[E,S]=(0,r.useState)(!0),[k,D]=(0,r.useState)(!0),{form:w,handlers:R}=H({initialValues:t,defaultValues:(0,g.getDefaultTicketForm)(),onClose:A,onSuccess:N}),[F,T]=(0,r.useState)(g.ClientType.PERSON),I=(0,G.A)(e=>Q.DF.getAll({query:e?{search:e,filters:JSON.stringify({type:F}),includeDetails:!0}:{filters:JSON.stringify({type:F}),includeDetails:!0}}).then(e=>(S(!0),e)),1e3),V=(0,G.A)(e=>Q.yD.getAll({query:e?{search:e,includeDetails:!0}:{includeDetails:!0}}).then(e=>(D(!0),e)),1e3),B=(0,r.useCallback)(()=>{I.setQuery(""),V.setQuery(""),S(!0),D(!0),w.reset()},[w,I,V]),L=!!t,q=(0,l.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,l.jsxs)("div",{className:"p-5 space-y-6 text-graphite font-light",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"font-semibold mb-2 block",children:C("entities.client.selectType")}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsxs)("label",{className:"flex items-center gap-2",children:[(0,l.jsx)("input",{type:"radio",value:g.ClientType.PERSON,checked:F===g.ClientType.PERSON,onChange:e=>T(e.target.value),className:"text-blue-600"}),(0,l.jsx)("span",{children:C("entities.client.individual")})]}),(0,l.jsxs)("label",{className:"flex items-center gap-2",children:[(0,l.jsx)("input",{type:"radio",value:g.ClientType.COMPANY,checked:F===g.ClientType.COMPANY,onChange:e=>T(e.target.value),className:"text-blue-600"}),(0,l.jsx)("span",{children:C("entities.client.company")})]})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"font-semibold mb-1 block",children:[C("entities.ticket.searchClient")," ",(0,l.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,l.jsxs)("div",{className:"border rounded-md border-gray-300",children:[(0,l.jsx)(n.A,{fullWidth:!0,placeholder:C("common.placeholders.search"),value:I.query,onChange:e=>I.setQuery(e.target.value),InputProps:{startAdornment:(0,l.jsx)(o.A,{position:"start",children:(0,l.jsx)(h.A,{"aria-label":C("common.actions.search"),onClick:()=>{I.searchNow(I.query),S(!0)},edge:"start",size:"small",children:(0,l.jsx)(u.A,{})})}),endAdornment:I.loading?(0,l.jsx)(o.A,{position:"end",children:(0,l.jsx)(p.A,{size:20})}):null},sx:{"& .MuiInputBase-root":{border:"none"},"& .MuiOutlinedInput-notchedOutline":{border:"none"}}}),w.values.client&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.A,{}),(0,l.jsx)(O,{client:w.values.client,onRemove:R.handleRemoveClient,size:"xs"}),w.values.representative&&(0,g.isExpandedRepresentative)(w.values.representative)&&(0,l.jsx)(z,{person:w.values.representative.person,onRemove:R.handleRemoveRepresentative,size:"xs"})]})]}),(0,l.jsx)($,{clients:I.results,clientSearchType:F,onSelectClient:e=>{R.handleSelectClient(e),I.setQuery(""),S(!1)},onSelectRepresentative:R.handleSelectRepresentative,resultsVisible:E,setResultsVisibility:S}),w.validationErrors?.client&&(0,l.jsx)("p",{className:"mt-1 text-sm text-red-600",children:w.validationErrors.client})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"font-semibold mb-1 block",children:C("entities.ticket.assignEmployee")}),(0,l.jsxs)("div",{className:"border rounded-md border-gray-300",children:[(0,l.jsx)(n.A,{fullWidth:!0,placeholder:C("common.placeholders.search"),value:V.query,onChange:e=>V.setQuery(e.target.value),InputProps:{startAdornment:(0,l.jsx)(o.A,{position:"start",children:(0,l.jsx)(h.A,{"aria-label":C("common.actions.search"),onClick:()=>{V.searchNow(V.query),D(!0)},edge:"start",size:"small",children:(0,l.jsx)(u.A,{})})}),endAdornment:V.loading?(0,l.jsx)(o.A,{position:"end",children:(0,l.jsx)(p.A,{size:20})}):null},sx:{"& .MuiInputBase-root":{border:"none"},"& .MuiOutlinedInput-notchedOutline":{border:"none"}}}),w.values.employees.length>0&&(0,l.jsx)(l.Fragment,{children:w.values.employees.map(e=>(0,l.jsxs)(a().Fragment,{children:[(0,l.jsx)(d.A,{}),(0,l.jsx)(y.D,{employee:e,size:"sm",showHoverEffect:!0,onRemove:()=>R.handleRemoveEmployee(e.id)})]},e.id))})]}),(0,l.jsx)(f.l,{employees:V.results,onSelectEmployee:e=>{R.handleSelectEmployee(e),V.setQuery(""),D(!1)},resultsVisible:k,setResultsVisibility:D}),w.validationErrors?.employees&&(0,l.jsx)("p",{className:"mt-1 text-sm text-red-600",children:w.validationErrors.employees})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"font-semibold mb-1 block",children:[C("entities.ticket.equipmentDescription")," ",(0,l.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,l.jsx)("textarea",{rows:3,required:!0,value:w.values.equipmentDescription,onChange:e=>R.updateField("equipmentDescription",e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",placeholder:C("common.placeholders.description")}),w.validationErrors?.equipmentDescription&&(0,l.jsx)("p",{className:"mt-1 text-sm text-red-600",children:w.validationErrors.equipmentDescription})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"font-semibold mb-1 block",children:C("entities.ticket.priority")}),(0,l.jsx)(c.A,{fullWidth:!0,children:(0,l.jsx)(m.A,{value:w.values.priority,onChange:e=>R.updateField("priority",e.target.value),MenuProps:{disablePortal:!0},children:Object.values(g.OrderPriority).map(e=>(0,l.jsx)(x.A,{value:e,children:C(`entities.ticket.priorityLevels.${e.toLowerCase()}`)},e))})}),w.validationErrors?.priority&&(0,l.jsx)("p",{className:"mt-1 text-sm text-red-600",children:w.validationErrors.priority})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,l.jsx)("label",{className:"font-semibold",children:C("entities.ticket.estimatedDeliveryDate")}),w.values.estimatedDeliveryDate&&(0,l.jsx)(h.A,{size:"small",color:"error",onClick:()=>R.updateField("estimatedDeliveryDate",(0,_.Oc)()),className:"bg-red-200",children:(0,l.jsx)(W.FO3,{size:18})})]}),(0,l.jsx)(n.A,{fullWidth:!0,type:"date",value:w.values.estimatedDeliveryDate?(0,_.Oc)(w.values.estimatedDeliveryDate):"",onChange:e=>R.updateField("estimatedDeliveryDate",(0,_.Oc)(e.target.value))}),w.validationErrors?.estimatedDeliveryDate&&(0,l.jsx)("p",{className:"mt-1 text-sm text-red-600",children:w.validationErrors.estimatedDeliveryDate})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"font-semibold mb-1 block",children:C("entities.ticket.estimatedCost")}),(0,l.jsx)(b.HG,{customInput:n.A,fullWidth:!0,thousandSeparator:!0,decimalScale:2,allowNegative:!1,value:w.values.estimatedCost,onValueChange:e=>R.updateField("estimatedCost",e.floatValue??0),placeholder:"0.00",error:!!w.validationErrors?.estimatedCost,helperText:w.validationErrors?.estimatedCost})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"font-semibold mb-1 block",children:C("entities.ticket.estimatedExecutionTime")}),(0,l.jsx)(P.A,{defaultMinutes:w.values.estimatedExecutionTime,onChange:e=>R.updateField("estimatedExecutionTime",e)}),w.validationErrors?.estimatedExecutionTime&&(0,l.jsx)("p",{className:"mt-1 text-sm text-red-600",children:w.validationErrors.estimatedExecutionTime})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"font-semibold mb-1 block",children:C("common.fields.observations")}),(0,l.jsx)("textarea",{rows:3,value:w.values.observations||"",onChange:e=>R.updateField("observations",e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",placeholder:C("common.placeholders.description")}),w.validationErrors?.observations&&(0,l.jsx)("p",{className:"mt-1 text-sm text-red-600",children:w.validationErrors.observations})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"font-semibold mb-1 block",children:C("entities.ticket.imageUrl")}),(0,l.jsx)(n.A,{fullWidth:!0,type:"url",value:w.values.imageUrl||"",onChange:e=>R.updateField("imageUrl",e.target.value),placeholder:C("entities.ticket.placeholders.imageUrl"),error:!!w.validationErrors?.imageUrl,helperText:w.validationErrors?.imageUrl})]})]})}),U=L?v.WM1:v.Xb0,X=L?j.uO9:j.OiG;return(0,l.jsx)(M.I,{open:e,canSubmit:w.canSubmit,variant:s,title:L?C("entities.ticket.edit"):C("entities.ticket.create"),titleIcon:(0,l.jsx)(U,{size:22}),primaryActionLabel:L?C("forms.saveChanges"):C("entities.ticket.create"),primaryActionIcon:(0,l.jsx)(X,{}),onSubmit:w.submit,onClose:A,onReset:B,hasUnsavedChanges:w.isDirty,children:q})}},53827:(e,t,s)=>{s.d(t,{l:()=>x});var l=s(28625),r=s(64996),a=s(24098),i=s(36317),n=s(91080),o=s(79155),d=s(54340),c=s(67173),m=s(12178);let x=({employees:e,onSelectEmployee:t,resultsVisible:s=!0,setResultsVisibility:x})=>{let{t:u}=(0,o.Bd)(),[p,h]=(0,r.useState)(!1),j=u("entities.employee.searchKeys",{returnObjects:!0});return e?0===e.length?(0,l.jsxs)("div",{className:"flex flex-col gap-4 items-center justify-center py-8 px-4 mt-4 bg-gray-50 border border-gray-200 rounded-lg",children:[(0,l.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("p",{className:"text-gray-500 text-sm font-medium",children:u("common.ui.noResults")}),(0,l.jsx)("p",{className:"text-gray-400 text-xs",children:u("common.ui.tryDifferentSearch")})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs text-gray-500 font-medium mb-1",children:u("common.ui.searchCriteria")}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:j.map(e=>(0,l.jsx)("span",{className:"bg-purple-100 text-purple-700 text-xs font-medium px-3 py-1 rounded-full border border-purple-200",children:e},e))})]}),(0,l.jsx)(a.A,{variant:"outlined",size:"small",startIcon:(0,l.jsx)(i.zHz,{}),sx:{borderColor:"#87b3fa",color:"#3B82F6",textTransform:"none",fontSize:"0.85rem",borderRadius:"8px",px:2.5,py:1,mt:4,backgroundColor:"#EFF6FF","&:hover":{borderColor:"#3B82F6"}},onClick:()=>h(!0),children:u("entities.employee.create")}),(0,l.jsx)(n.N,{open:p,onClose:()=>h(!1)})]}):(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:u("common.fields.results")}),(0,l.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800 border border-indigo-200",children:[e.length," ",u("common.entities.employee")]})]}),(0,l.jsx)(a.A,{variant:"outlined",size:"small",startIcon:s?(0,l.jsx)(c.A,{}):(0,l.jsx)(m.A,{}),onClick:()=>x?.(!s),sx:{textTransform:"none",fontSize:"0.75rem",minWidth:"auto",padding:"4px 8px"},children:u(s?"common.actions.hide":"common.actions.show")})]}),s&&(0,l.jsxs)("div",{className:"max-h-96 overflow-y-auto border border-gray-300 rounded-md bg-white shadow-sm",children:[e.map(e=>(0,l.jsx)("div",{className:"cursor-pointer border-b border-gray-200 last:border-b-0",children:(0,l.jsx)(d.D,{employee:e,onSelect:()=>{x?.(!1),t?.(e)},size:"xs"})},e.id)),(0,l.jsx)("div",{className:"flex justify-center items-center py-3 bg-gray-50 border-t border-gray-200",children:(0,l.jsx)(a.A,{variant:"text",size:"small",startIcon:(0,l.jsx)(i.zHz,{}),onClick:()=>h(!0),style:{padding:"8px 16px",textTransform:"none",fontSize:"0.9rem",color:"#3B82F6"},children:u("entities.employee.create")})})]}),(0,l.jsx)(n.N,{open:p,onClose:()=>h(!1)})]}):null}},54340:(e,t,s)=>{s.d(t,{D:()=>u});var l=s(28625);s(64996);var r=s(54055),a=s(87414),i=s(8964),n=s(22380),o=s(36131),d=s(19554),c=s(79155),m=s(70333),x=s(40145);let u=({employee:e,onSelect:t,...s})=>{let{t:u}=(0,c.Bd)();return(0,l.jsxs)(m.X,{...s,title:e.fullName,icon:(0,l.jsx)("span",{className:"font-semibold text-xs",children:(0,d.IM)(e.fullName)}),headerChildren:(0,r.isExpandedEmployeeBase)(e)&&(0,l.jsxs)("div",{className:"flex flex-wrap gap-1 mt-2",children:[e.role&&(0,l.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:[(0,l.jsx)(o.A,{style:{fontSize:"10px"},className:"mr-1"}),(0,d.wR)(e.role.name)]}),e.department&&(0,l.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:[(0,l.jsx)(a.A,{style:{fontSize:"10px"},className:"mr-1"}),(0,d.wR)(e.department.name)]})]}),color:"purple",onClick:()=>t?.(e),children:[e.phone&&(0,l.jsx)(x.d,{label:u("employee.phone"),value:e.phone,icon:(0,l.jsx)(i.A,{fontSize:"inherit"})}),e.email&&(0,l.jsx)(x.d,{label:u("employee.email"),value:e.email,icon:(0,l.jsx)(n.A,{fontSize:"inherit"})})]})}},59294:(e,t,s)=>{s.d(t,{h:()=>C});var l=s(28625),r=s(19347),a=s(79285),i=s(25226),n=s(54024),o=s(43269),d=s(53827),c=s(96838),m=s(31861),x=s(80015),u=s(14902),p=s(51287),h=s(64996),j=s.n(h),v=s(54340),b=s(79155),g=s(54055),f=s(22349),y=s(78361);let N=(e,t,s)=>{let l=(0,f.A)({itemName:"Departament",initialValues:e,itemId:e?.id,defaultValues:(0,g.getDefaultDepartmentForm)(),onClose:t,onSuccess:s,createRecord:y.iw.create,updateRecord:y.iw.update,getCreateDto:g.convertDepartmentFormToDto,getUpdateDto:g.convertDepartmentFormToDto,validator:g.validateDepartmentForm});return{form:l,handlers:{updateField:(e,t)=>l.setValues(e,t),handleSelectEmployee:e=>{l.values.employees.map(e=>e.id).includes(e.id)||l.setValues("employees",[...l.values.employees,e])},handleRemoveEmployee:e=>{l.setValues("employees",l.values.employees.filter(t=>t.id!==e))},updateDepartmentField:(e,t)=>{l.setValues(e,t)}}}};var A=s(81389);let C=({open:e,department:t,variant:s,withEmployees:g=!0,onClose:f,onRefresh:y})=>{let{t:C}=(0,b.Bd)(),{form:E,handlers:S}=N(t,f,y),[k,D]=(0,h.useState)(!0),z=(0,A.A)(e=>c.y.getAll({query:e?{search:e,includeDetails:!0}:{includeDetails:!0}}),1e3),w=!!t?.id,R=(0,l.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,l.jsxs)("div",{className:"p-5 space-y-6 text-graphite font-light",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"font-semibold mb-1 block",children:[C("common.fields.name")," ",(0,l.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,l.jsx)(r.A,{fullWidth:!0,required:!0,value:E.values.name,onChange:e=>S.updateDepartmentField("name",e.target.value),placeholder:C("common.placeholders.name"),error:!!E.validationErrors?.name,helperText:E.validationErrors?.name})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"font-semibold mb-1 block",children:C("common.fields.description")}),(0,l.jsx)("textarea",{rows:3,value:E.values.description,onChange:e=>S.updateDepartmentField("description",e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",placeholder:C("common.placeholders.description")}),E.validationErrors?.description&&(0,l.jsx)("p",{className:"mt-1 text-sm text-red-600",children:E.validationErrors.description})]}),g&&(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"font-semibold mb-1 block",children:C("entities.department.assignEmployees")}),(0,l.jsxs)("div",{className:"border rounded-md border-gray-300",children:[(0,l.jsx)(r.A,{fullWidth:!0,placeholder:C("common.placeholders.search"),value:z.query,onChange:e=>z.setQuery(e.target.value),InputProps:{startAdornment:(0,l.jsx)(a.A,{position:"start",children:(0,l.jsx)(x.A,{onClick:()=>z.searchNow(z.query),size:"small",children:(0,l.jsx)(u.A,{})})}),endAdornment:z.loading?(0,l.jsx)(a.A,{position:"end",children:(0,l.jsx)(m.A,{size:20})}):null}}),E.values.employees.map(e=>(0,l.jsxs)(j().Fragment,{children:[(0,l.jsx)(i.A,{}),(0,l.jsx)(v.D,{employee:e,size:"xs",onRemove:()=>S.handleRemoveEmployee(e.id),displayDetails:!0})]},e.id))]}),(0,l.jsx)(d.l,{onSelectEmployee:e=>{S.handleSelectEmployee(e),z.setQuery(""),D(!1)},employees:z.results,resultsVisible:k,setResultsVisibility:D})]})]})});return(0,l.jsx)(p.I,{open:e,canSubmit:E.canSubmit,variant:s,title:C(w?"entities.department.edit":"entities.department.create"),titleIcon:(0,l.jsx)(n.A,{}),primaryActionLabel:C(w?"common.actions.save":"entities.department.create"),primaryActionIcon:w?(0,l.jsx)(o.uO9,{}):(0,l.jsx)(o.OiG,{}),onSubmit:E.submit,onClose:f,onReset:()=>{z.setQuery(""),D(!0),E.reset()},hasUnsavedChanges:E.isDirty,children:R})}},62173:(e,t,s)=>{s.d(t,{Ez:()=>h,kW:()=>v});var l=s(28625);s(64996);var r=s(69994),a=s(25025),i=s(44367),n=s(2811),o=s(14816),d=s(54836),c=s(78094),m=s(62305),x=s(68380),u=s(67832),p=s(54055);let h={[p.OrderStatus.NEW]:"#3B82F6",[p.OrderStatus.TAKEN]:"#64748B",[p.OrderStatus.IN_PROGRESS]:"#0EA5E9",[p.OrderStatus.APPROVED]:"#10B981",[p.OrderStatus.IN_TESTING]:"#A855F7",[p.OrderStatus.COMPLETED]:"#22C55E",[p.OrderStatus.CONTACT_CLIENT]:"#F472B6",[p.OrderStatus.WAITING_CLIENT]:"#F59E0B",[p.OrderStatus.DELIVERED]:"#374151",[p.OrderStatus.CANCELLED]:"#EF4444"},j={[p.OrderStatus.NEW]:r.A,[p.OrderStatus.TAKEN]:a.A,[p.OrderStatus.IN_PROGRESS]:i.A,[p.OrderStatus.APPROVED]:n.A,[p.OrderStatus.IN_TESTING]:o.A,[p.OrderStatus.COMPLETED]:d.A,[p.OrderStatus.CONTACT_CLIENT]:c.A,[p.OrderStatus.WAITING_CLIENT]:m.A,[p.OrderStatus.DELIVERED]:x.A,[p.OrderStatus.CANCELLED]:u.A},v=({status:e,size:t=24})=>{let s=j[e],r=h[e];return s?(0,l.jsx)(s,{sx:{fontSize:t},htmlColor:r}):null}},65482:(e,t,s)=>{s.d(t,{V:()=>h});var l=s(28625),r=s(64996),a=s(79155),i=s(6186),n=s(24098),o=s(72980),d=s(35969),c=s(87439),m=s(6730),x=s(54055),u=s(62173),p=s(34401);let h=({ticketId:e,currentState:t,scale:s,displayOnly:h=!1,onStateChange:j})=>{let{t:v}=(0,a.Bd)(),{setAlert:b}=(0,c.Z)(),[g,f]=r.useState(null),[y,N]=r.useState(null),[A,C]=r.useState(!1),E=m.q.useUpdateStatus({},{onSuccess:e=>{b?.(v("entities.ticket.stateChange.success",{state:v(`entities.ticket.status.${t}`)}),"success",1500),j&&j(e.status)},onError:e=>{console.error("Failed to update ticket state:",e.message),b?.(v("entities.ticket.stateChange.error"),"error",3e3)}}),S=()=>{f(null)},k=e=>{if(e===t){S();return}N(e),C(!0),S()};return(0,l.jsxs)("div",{className:"inline-block text-sm",style:{transform:`scale(${s})`,transformOrigin:"top left"},children:[(0,l.jsxs)(n.A,{variant:"contained",disableElevation:!0,onClick:e=>{h||f(e.currentTarget)},sx:{textTransform:"capitalize",paddingY:.5,paddingX:1,borderRadius:"6px",backgroundColor:u.Ez[t],cursor:h?"default":"pointer",pointerEvents:h?"none":"auto","&:hover":h?{}:{backgroundColor:u.Ez[t],filter:"brightness(0.9)"}},children:[(0,l.jsx)("span",{style:{whiteSpace:"nowrap"},children:v(`entities.ticket.status.${t}`)}),!h&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{style:{height:"20px",width:"2px",borderRadius:"18px",backgroundColor:"rgba(255, 255, 255, 0.3)",marginLeft:8,marginRight:4}}),(0,l.jsx)(i.A,{})]})]}),!h&&(0,l.jsx)(o.A,{anchorEl:g,open:!!g,onClose:S,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:Object.values(x.OrderStatus).map(e=>(0,l.jsx)(d.A,{selected:e===t,onClick:()=>k(e),sx:{textTransform:"capitalize",fontSize:"12px",minHeight:"32px"},children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(u.kW,{status:e,size:16}),v(`entities.ticket.status.${e}`)]})},e))}),y&&(0,l.jsx)(p.T,{open:A,title:v("dialogs.statusChange.title",{item:v("common.entities.ticket")}),content:(0,l.jsxs)("div",{className:"flex flex-col items-center text-center space-y-3",children:[(0,l.jsx)("span",{className:"text-sm text-gray-700",children:(0,l.jsx)(a.x6,{i18nKey:"dialogs.statusChange.message",values:{from:v(`entities.ticket.status.${t}`),to:v(`entities.ticket.status.${y}`)},components:{1:(0,l.jsx)("span",{className:"text-black font-semibold"}),2:(0,l.jsx)("span",{className:"text-black font-semibold"})}})}),(0,l.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,l.jsx)("span",{className:"text-sm inline-block px-2 py-0.5 rounded-md text-white border border-black/40",style:{backgroundColor:u.Ez[t]},children:v(`entities.ticket.status.${t}`)}),(0,l.jsx)("span",{className:"text-sm text-gray-600",children:"â†’"}),(0,l.jsx)("span",{className:"text-sm inline-block px-2 py-0.5 rounded-md text-white border border-black/40",style:{backgroundColor:u.Ez[y]},children:v(`entities.ticket.status.${y}`)})]})]}),confirmText:v("common.actions.confirm"),cancelText:v("common.actions.cancel"),onConfirm:()=>{y&&void 0!==e&&(E.mutate({id:e,dto:{status:y}}),N(null),C(!1))},onCancel:()=>{N(null),C(!1)}})]})}},66743:(e,t,s)=>{s.d(t,{F:()=>C});var l=s(28625),r=s(64996),a=s.n(r),i=s(79155),n=s(19347),o=s(79285),d=s(80015),c=s(31861),m=s(25226),x=s(43269),u=s(36317),p=s(14902),h=s(96838),j=s(54340),v=s(51287),b=s(53827),g=s(54055),f=s(22349),y=s(78361);let N=(e,t,s)=>{let l=(0,f.A)({itemName:"Rol Angajat",initialValues:e,defaultValues:(0,g.getDefaultEmployeeRoleForm)(),itemId:e?.id,onClose:t,onSuccess:s,createRecord:y.Mg.create,updateRecord:y.Mg.update,getCreateDto:g.convertEmployeeRoleFormToDto,getUpdateDto:g.convertEmployeeRoleFormToDto,validator:g.validateEmployeeRoleForm});return{form:l,handlers:{updateField:(e,t)=>l.setValues(e,t),handleSelectEmployee:e=>{l.values.employees.some(t=>t.id===e.id)||l.setValues("employees",[...l.values.employees,e])},handleRemoveEmployee:e=>{l.setValues("employees",l.values.employees.filter(t=>t.id!==e))},updateRoleField:(e,t)=>{l.setValues(e,t)}}}};var A=s(81389);let C=({open:e,role:t,variant:s,withEmployees:g=!0,onRefresh:f,onClose:y})=>{let{t:C}=(0,i.Bd)(),{form:E,handlers:S}=N(t,y,f),[k,D]=(0,r.useState)(!0),z=(0,A.A)(e=>h.y.getAll({query:e?{search:e,includeDetails:!0}:{includeDetails:!0}}),1e3),w=!!t,R=(0,l.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,l.jsxs)("div",{className:"p-5 space-y-6 text-graphite font-light",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"font-semibold mb-1 block",children:[C("common.fields.name")," ",(0,l.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,l.jsx)(n.A,{fullWidth:!0,required:!0,value:E.values.name,onChange:e=>S.updateRoleField("name",e.target.value),placeholder:C("entities.role.placeholders.name"),error:!!E.validationErrors?.name,helperText:E.validationErrors?.name})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"font-semibold mb-1 block",children:C("common.fields.description")}),(0,l.jsx)("textarea",{rows:3,value:E.values.description,onChange:e=>S.updateRoleField("description",e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",placeholder:C("entities.role.placeholders.description")}),E.validationErrors?.description&&(0,l.jsx)("p",{className:"mt-1 text-sm text-red-600",children:E.validationErrors.description})]}),g&&(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"font-semibold mb-1 block",children:C("entities.role.assignEmployees")}),(0,l.jsxs)("div",{className:"border rounded-md border-gray-300",children:[(0,l.jsx)(n.A,{fullWidth:!0,placeholder:C("common.placeholders.search"),value:z.query,onChange:e=>z.setQuery(e.target.value),InputProps:{startAdornment:(0,l.jsx)(o.A,{position:"start",children:(0,l.jsx)(d.A,{onClick:()=>{z.searchNow(z.query),D(!0)},size:"small","aria-label":C("common.actions.search"),children:(0,l.jsx)(p.A,{})})}),endAdornment:z.loading?(0,l.jsx)(o.A,{position:"end",children:(0,l.jsx)(c.A,{size:20})}):null}}),E.values.employees.map(e=>(0,l.jsxs)(a().Fragment,{children:[(0,l.jsx)(m.A,{}),(0,l.jsx)(j.D,{employee:e,size:"xs",onRemove:()=>S.handleRemoveEmployee(e.id),displayDetails:!0})]},e.id))]}),(0,l.jsx)(b.l,{onSelectEmployee:e=>{S.handleSelectEmployee(e),z.setQuery(""),D(!1)},employees:z.results,resultsVisible:k,setResultsVisibility:D})]})]})}),F=u.zHz,T=w?x.uO9:x.OiG;return(0,l.jsx)(v.I,{open:e,canSubmit:E.canSubmit,variant:s,title:C(w?"entities.role.edit":"entities.role.create"),titleIcon:(0,l.jsx)(F,{size:22}),primaryActionLabel:C(w?"common.actions.save":"entities.role.create"),primaryActionIcon:(0,l.jsx)(T,{}),onSubmit:E.submit,onClose:y,onReset:()=>{z.setQuery(""),D(!0),E.reset()},hasUnsavedChanges:E.isDirty,children:R})}},70333:(e,t,s)=>{s.d(t,{X:()=>o});var l=s(28625),r=s(64996),a=s(73625),i=s(69465);let n={xs:{padding:"p-4",gap:"gap-2",iconContainer:"w-6 h-6",title:"text-sm",label:"text-[10px]",text:"text-xs",contentMargin:"mt-3"},sm:{padding:"p-5",gap:"gap-3",iconContainer:"w-8 h-8",title:"text-sm",label:"text-xs",text:"text-sm",contentMargin:"mt-3"},md:{padding:"p-6",gap:"gap-3",iconContainer:"w-10 h-10",title:"text-base",label:"text-xs",text:"text-sm",contentMargin:"mt-3"}},o=({title:e,icon:t,size:s="md",color:o="gray",showHoverEffect:d=!1,displayDetails:c=!1,onClick:m,onRemove:x,headerChildren:u,children:p})=>{let[h,j]=(0,r.useState)(c),v=n[s],b=d?`hover:border-${o}-400`:"",g=`bg-${o}-100`,f=`text-${o}-700`,y=m?"cursor-pointer":"";return(0,l.jsxs)("div",{onClick:m,className:`bg-white rounded-md border border-gray-200 shadow-sm group relative transition-all duration-200 border-l-4 border-transparent ${v.padding} ${b} ${y}`,children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:`flex items-center justify-between ${v.gap}`,children:[(0,l.jsxs)("div",{className:`flex items-center ${v.gap} min-w-0 flex-1`,children:[(0,l.jsx)("div",{className:`${v.iconContainer} rounded-full flex items-center justify-center flex-shrink-0 ${g} ${f}`,children:t}),(0,l.jsx)("h3",{className:`${v.title} font-semibold text-gray-900 leading-tight truncate min-w-0`,children:e})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,l.jsx)(a.L,{isExpanded:h,onToggle:()=>{j(e=>!e)}}),x&&(0,l.jsx)(i.J,{onClick:e=>{e.stopPropagation(),x()}})]})]}),u]}),h&&(0,l.jsx)("div",{className:`${v.contentMargin} ${v.text} text-gray-600`,children:p})]})}},91080:(e,t,s)=>{s.d(t,{N:()=>I});var l=s(28625),r=s(64996),a=s(19347),i=s(79285),n=s(80015),o=s(31861),d=s(25226),c=s(43269),m=s(14902),x=s(76340),u=s(79155),p=s(6299),h=s(42254),j=s(70333),v=s(40145),b=s(19554);let g=({role:e,onSelect:t,onRemove:s,...r})=>{let{t:a}=(0,u.Bd)();return(0,l.jsx)(j.X,{...r,title:(0,b.wR)(e.name),icon:(0,l.jsx)(p.A,{fontSize:"inherit"}),color:"purple",onClick:()=>t?.(e),onRemove:s,children:e.description&&(0,l.jsx)(v.d,{label:a("role.description"),value:e.description,icon:(0,l.jsx)(h.A,{fontSize:"inherit"})})})};var f=s(24098),y=s(67173),N=s(12178),A=s(66743);let C=({roles:e,onSelectRole:t,resultsVisible:s=!0,setResultsVisibility:a})=>{let{t:i}=(0,u.Bd)(),[n,o]=(0,r.useState)(!1),d=i("entities.role.searchKeys",{returnObjects:!0});return e?0===e.length?(0,l.jsxs)("div",{className:"flex flex-col items-center justify-between gap-3 h-full py-8 px-4 mt-4 bg-gray-50 border border-gray-200 rounded-lg",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,l.jsxs)("div",{className:"flex flex-col gap-1 items-center justify-center",children:[(0,l.jsx)("p",{className:"text-gray-500 text-sm font-medium",children:i("common.ui.noResults")}),(0,l.jsx)("p",{className:"text-gray-400 text-xs",children:i("common.ui.tryDifferentSearch")})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs text-gray-500 font-medium mb-1",children:i("common.ui.searchCriteria")}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:d.map(e=>(0,l.jsx)("span",{className:"bg-purple-100 text-purple-700 text-xs font-medium px-3 py-1 rounded-full border border-purple-200",children:e},e))})]}),(0,l.jsx)(f.A,{variant:"outlined",size:"small",startIcon:(0,l.jsx)(c.OiG,{}),sx:{borderColor:"#87b3fa",color:"#3B82F6",textTransform:"none",fontSize:"0.85rem",borderRadius:"8px",px:2.5,py:1,mt:4,backgroundColor:"#EFF6FF","&:hover":{borderColor:"#3B82F6"}},onClick:()=>o(!0),children:i("entities.role.create")}),(0,l.jsx)(A.F,{open:n,variant:"modal",withEmployees:!1,onClose:()=>o(!1)})]}):(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:i("common.fields.results")}),(0,l.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 border border-purple-200",children:[e.length," ",i("common.entities.role")]})]}),(0,l.jsx)(f.A,{variant:"outlined",size:"small",startIcon:s?(0,l.jsx)(y.A,{}):(0,l.jsx)(N.A,{}),onClick:()=>a?.(!s),sx:{textTransform:"none",fontSize:"0.75rem",minWidth:"auto",padding:"4px 8px"},children:i(s?"common.actions.hide":"common.actions.show")})]}),s&&(0,l.jsxs)("div",{className:"overflow-hidden max-h-96 overflow-y-auto border border-gray-300 rounded-md bg-white shadow-sm",children:[e.map(e=>(0,l.jsx)("div",{className:"cursor-pointer border-b border-gray-200 last:border-b-0",children:(0,l.jsx)(g,{role:e,onSelect:e=>{a?.(!1),t?.(e)},size:"sm"})},e.id)),(0,l.jsx)("div",{className:"flex justify-center items-center py-3 bg-gray-50",children:(0,l.jsx)(f.A,{variant:"text",size:"small",startIcon:(0,l.jsx)(c.OiG,{}),onClick:()=>o(!0),style:{padding:"8px 16px",textTransform:"none",fontSize:"0.9rem",color:"#3B82F6"},children:i("entities.role.create")})})]}),(0,l.jsx)(A.F,{open:n,variant:"modal",withEmployees:!1,onClose:()=>o(!1)})]}):null};var E=s(51287),S=s(54024);let k=({department:e,onSelect:t,onClick:s,...r})=>{let{t:a}=(0,u.Bd)();return(0,l.jsx)(j.X,{...r,title:(0,b.wR)(e.name),icon:(0,l.jsx)(S.A,{fontSize:"inherit"}),color:"blue",onClick:t,children:e.description&&(0,l.jsx)(v.d,{label:a("common.description"),value:e.description,icon:(0,l.jsx)(h.A,{fontSize:"inherit"})})})};var D=s(59294);let z=({departments:e,onSelectDepartment:t,resultsVisible:s=!0,setResultsVisibility:a})=>{let{t:i}=(0,u.Bd)(),[n,o]=(0,r.useState)(!1),d=i("entities.department.searchSuggestions",{returnObjects:!0});return e?0===e.length?(0,l.jsxs)("div",{className:"flex flex-col items-center justify-between gap-3 h-full py-8 px-4 mt-4 bg-gray-50 border border-gray-200 rounded-lg",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center",children:[(0,l.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,l.jsxs)("div",{className:"flex flex-col gap-1 items-center justify-center",children:[(0,l.jsx)("p",{className:"text-gray-500 text-sm font-medium",children:i("common.ui.noResults")}),(0,l.jsx)("p",{className:"text-gray-400 text-xs",children:i("common.ui.tryDifferentSearch")})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-xs text-gray-500 font-medium mb-1",children:i("common.ui.searchCriteria")}),(0,l.jsx)("div",{className:"flex flex-wrap gap-2",children:d.map(e=>(0,l.jsx)("span",{className:"bg-blue-100 text-blue-700 text-xs font-medium px-3 py-1 rounded-full border border-blue-200",children:e},e))})]}),(0,l.jsx)(f.A,{variant:"outlined",size:"small",startIcon:(0,l.jsx)(c.OiG,{}),sx:{borderColor:"#87b3fa",color:"#3B82F6",textTransform:"none",fontSize:"0.85rem",borderRadius:"8px",px:2.5,py:1,mt:4,backgroundColor:"#EFF6FF","&:hover":{borderColor:"#3B82F6"}},onClick:()=>o(!0),children:i("entities.department.create")}),(0,l.jsx)(D.h,{open:n,variant:"modal",onClose:()=>o(!1)})]}):(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("span",{className:"text-sm font-medium text-gray-700",children:i("common.fields.results")}),(0,l.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200",children:[e.length," ",i("common.entities.department")]})]}),(0,l.jsx)(f.A,{variant:"outlined",size:"small",startIcon:s?(0,l.jsx)(y.A,{}):(0,l.jsx)(N.A,{}),onClick:()=>a?.(!s),sx:{textTransform:"none",fontSize:"0.75rem",minWidth:"auto",padding:"4px 8px"},children:i(s?"common.actions.hide":"common.actions.show")})]}),s&&(0,l.jsxs)("div",{className:"overflow-hidden max-h-96 overflow-y-auto border border-gray-300 rounded-md bg-white shadow-sm",children:[e.map(e=>(0,l.jsx)("div",{className:"cursor-pointer border-b border-gray-200 last:border-b-0",children:(0,l.jsx)(k,{department:e,onSelect:()=>{a?.(!1),t?.(e)},size:"sm"})},e.id)),(0,l.jsx)("div",{className:"flex justify-center items-center py-3 bg-gray-50",children:(0,l.jsx)(f.A,{variant:"text",size:"small",startIcon:(0,l.jsx)(c.OiG,{}),onClick:()=>o(!0),style:{padding:"8px 16px",textTransform:"none",fontSize:"0.9rem",color:"#3B82F6"},children:i("entities.department.create")})})]}),(0,l.jsx)(D.h,{open:n,variant:"modal",withEmployees:!1,onClose:()=>o(!1)})]}):null};var w=s(54055),R=s(22349),F=s(78361);let T=(e,t,s)=>{let l=(0,R.A)({itemName:"Angajat",initialValues:e,defaultValues:(0,w.getDefaultEmployeeForm)(),itemId:e?.id,onClose:t,onSuccess:s,createRecord:F.yD.create,updateRecord:F.yD.update,getCreateDto:w.convertEmployeeFormToDto,getUpdateDto:w.convertEmployeeFormToDto,validator:w.validateEmployeeForm});return{form:l,handlers:{updateField:(e,t)=>l.setValues(e,t),handleSelectDepartment:e=>{l.setValues("department",e)},handleRemoveDepartment:()=>{l.setValues("department",null)},handleSelectRole:e=>{l.setValues("role",e)},handleRemoveRole:()=>{l.setValues("role",null)},updateEmployeeField:(e,t)=>{l.setValues(e,t)}}}};var O=s(81389);let I=({open:e,employee:t,variant:s,onRefresh:p,onClose:h})=>{let{t:j}=(0,u.Bd)(),{form:v,handlers:b}=T(t,h,p),[f,y]=(0,r.useState)(!0),[N,A]=(0,r.useState)(!0),S=(0,O.A)(e=>x.i.getAll({query:e?{search:e}:{}}),1e3),D=(0,O.A)(e=>F.Mg.getAll({query:e?{search:e}:{}}),1e3),w=(0,r.useCallback)(()=>{S.setQuery(""),D.setQuery(""),y(!0),A(!0),v.reset()},[v,S,D]),R=!!t,I=(0,l.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,l.jsxs)("div",{className:"p-5 space-y-6 text-graphite font-light",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"font-semibold mb-1 block",children:[j("entities.person.fullName")," ",(0,l.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,l.jsx)(a.A,{fullWidth:!0,required:!0,value:v.values.fullName,onChange:e=>b.updateEmployeeField("fullName",e.target.value),placeholder:j("common.placeholders.name"),error:!!v.validationErrors?.fullName,helperText:v.validationErrors?.fullName})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"font-semibold mb-1 block",children:j("common.fields.phone")}),(0,l.jsx)(a.A,{fullWidth:!0,value:v.values.phone,onChange:e=>b.updateEmployeeField("phone",e.target.value),placeholder:j("common.placeholders.phone"),error:!!v.validationErrors?.phone,helperText:v.validationErrors?.phone})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"font-semibold mb-1 block",children:j("common.fields.email")}),(0,l.jsx)(a.A,{fullWidth:!0,type:"email",value:v.values.email,onChange:e=>b.updateEmployeeField("email",e.target.value),placeholder:j("common.placeholders.email"),error:!!v.validationErrors?.email,helperText:v.validationErrors?.email})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"font-semibold mb-1 block",children:j("common.entities.department")}),(0,l.jsxs)("div",{className:"border rounded-md border-gray-300",children:[(0,l.jsx)(a.A,{fullWidth:!0,placeholder:j("common.placeholders.search"),value:S.query,onChange:e=>S.setQuery(e.target.value),InputProps:{startAdornment:v.values.department?null:(0,l.jsx)(i.A,{position:"start",children:(0,l.jsx)(n.A,{"aria-label":j("common.placeholders.search"),onClick:()=>{S.searchNow(S.query),y(!0)},edge:"start",size:"small",children:(0,l.jsx)(m.A,{})})}),endAdornment:S.loading?(0,l.jsx)(i.A,{position:"end",children:(0,l.jsx)(o.A,{size:20})}):null}}),v.values.department&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.A,{}),(0,l.jsx)(k,{department:v.values.department,onRemove:b.handleRemoveDepartment,showHoverEffect:!1,size:"xs"})]})]}),(0,l.jsx)(z,{departments:S.results,onSelectDepartment:e=>{b.handleSelectDepartment(e),S.setQuery(""),y(!1)},resultsVisible:f,setResultsVisibility:y})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"font-semibold mb-1 block",children:j("common.entities.role")}),(0,l.jsxs)("div",{className:"border rounded-md border-gray-300",children:[(0,l.jsx)(a.A,{fullWidth:!0,placeholder:j("common.placeholders.search"),value:D.query,onChange:e=>D.setQuery(e.target.value),InputProps:{startAdornment:v.values.role?null:(0,l.jsx)(i.A,{position:"start",children:(0,l.jsx)(n.A,{"aria-label":j("common.placeholders.search"),onClick:()=>{D.searchNow(D.query),A(!0)},edge:"start",size:"small",children:(0,l.jsx)(m.A,{})})}),endAdornment:D.loading?(0,l.jsx)(i.A,{position:"end",children:(0,l.jsx)(o.A,{size:20})}):null}}),v.values.role&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.A,{}),(0,l.jsx)(g,{role:v.values.role,onRemove:b.handleRemoveRole,showHoverEffect:!1,size:"xs"})]})]}),(0,l.jsx)(C,{roles:D.results,onSelectRole:e=>{b.handleSelectRole(e),D.setQuery(""),A(!1)},resultsVisible:N,setResultsVisibility:A})]})]})}),V=R?c.uO9:c.NPy,B=R?c.uO9:c.OiG;return(0,l.jsx)(E.I,{open:e,canSubmit:v.canSubmit,variant:s,title:j(R?"entities.employee.edit":"entities.employee.create"),titleIcon:(0,l.jsx)(V,{size:22}),primaryActionLabel:j(R?"common.actions.save":"entities.employee.create"),primaryActionIcon:(0,l.jsx)(B,{}),onSubmit:v.submit,onClose:h,onReset:w,hasUnsavedChanges:v.isDirty,children:I})}}};