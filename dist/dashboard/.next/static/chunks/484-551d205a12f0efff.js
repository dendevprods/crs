"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[484],{5484:(e,l,t)=>{t.d(l,{Z:()=>h});var s=t(73365),a=t(1521),r=t(92222),i=t(35935),n=t(61831),o=t(28402),d=t(90301),c=t(79092),u=t(3408),m=t(46436),p=t(92890),v=t(67616);let x={AVAILABLE:1,ON_ORDER:2,DEPLETED:3,UNAVAILABLE:4,DEFECTIVE:5},h=e=>{let{products:l,tableProps:t,withActions:h=!1,refetch:b}=e,{t:g}=(0,r.Bd)(),[j,f]=(0,a.useState)(null),[N,y]=(0,a.useState)([]),E=p.ZN.useDelete({},{onSuccess:()=>null==b?void 0:b()}),w=p.ZN.useDeleteMany({},{onSuccess:()=>null==b?void 0:b()}),A=e=>{y(Array.isArray(e)?e:[e])},C=e=>{let l=String(e);return g("entities.product.status.".concat(l.toLowerCase()))},F=[{label:g("common.fields.id"),align:"right",sortable:!0,sortFn:(e,l)=>e.id-l.id},{label:g("entities.product.productCode"),align:"left"},{label:g("common.fields.name"),align:"left",sortable:!0,sortFn:(e,l)=>e.name.localeCompare(l.name,"ro",{sensitivity:"base"})},{label:g("common.fields.description"),align:"left"},{label:g("entities.product.category"),align:"left",sortable:!0,sortFn:(e,l)=>{var t,s;return(null!==(t=e.category)&&void 0!==t?t:"").localeCompare(null!==(s=l.category)&&void 0!==s?s:"","ro",{sensitivity:"base"})}},{label:g("common.fields.unitPrice"),align:"right",sortable:!0,sortFn:(e,l)=>{var t,s;return(null!==(t=e.unitPrice)&&void 0!==t?t:0)-(null!==(s=l.unitPrice)&&void 0!==s?s:0)}},{label:g("common.fields.status"),align:"center",sortable:!0,sortFn:(e,l)=>{var t,s;return(null!==(t=x[e.status])&&void 0!==t?t:99)-(null!==(s=x[l.status])&&void 0!==s?s:99)}},{label:g("common.fields.quantity"),align:"right",sortable:!0,sortFn:(e,l)=>{var t,s;return(null!==(t=e.quantity)&&void 0!==t?t:0)-(null!==(s=l.quantity)&&void 0!==s?s:0)}},{label:g("entities.product.weight"),align:"right",sortable:!0,sortFn:(e,l)=>{var t,s;return(null!==(t=e.weight)&&void 0!==t?t:0)-(null!==(s=l.weight)&&void 0!==s?s:0)}},{label:g("entities.product.supplier"),align:"left",sortable:!0,sortFn:(e,l)=>{var t,s;return(null!==(t=e.supplier)&&void 0!==t?t:"").localeCompare(null!==(s=l.supplier)&&void 0!==s?s:"","ro",{sensitivity:"base"})}},{label:g("entities.product.serialNumber"),align:"left"},{label:g("common.fields.observations"),align:"center"}],k=[{render:e=>(0,s.jsxs)("span",{className:"font-mono text-sm px-3 py-1 bg-gray-50 rounded",children:["#",e.id]})},{render:e=>(0,s.jsx)(c.n,{value:e.productCode,type:"copyable"})},{render:e=>(0,s.jsx)("span",{className:"font-medium truncate",children:e.name}),className:"bg-zinc-50"},{render:e=>{var l,t;return(0,s.jsx)("div",{className:"px-4 py-2",children:(0,s.jsx)(d.A,{title:null!==(l=e.description)&&void 0!==l?l:g("common.fields.empty"),arrow:!0,children:(0,s.jsx)("div",{className:"text-sm font-medium max-w-[200px] truncate",children:null!==(t=e.description)&&void 0!==t?t:g("common.fields.empty")})})})},className:"bg-zinc-50"},{render:e=>e.category?(0,s.jsxs)("span",{className:"inline-flex items-center gap-2 px-3 py-1 text-sm font-medium text-blue-800 bg-blue-100 rounded-md",children:[(0,s.jsx)(n.M1j,{size:14})," ",(0,o.wR)(e.category)]}):(0,s.jsx)("span",{className:"text-gray-400",children:g("common.fields.empty")})},{render:e=>{var l;return(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 font-medium whitespace-nowrap",children:[(0,s.jsx)(n.H4F,{size:16,className:"flex-shrink-0"}),(null!==(l=e.unitPrice)&&void 0!==l?l:0).toFixed(2)]})}},{render:e=>{let l="",t="";switch(e.status){case"AVAILABLE":l="bg-green-100",t="text-green-800";break;case"UNAVAILABLE":default:l="bg-gray-100",t="text-gray-800";break;case"DEPLETED":l="bg-red-100",t="text-red-800";break;case"ON_ORDER":l="bg-yellow-100",t="text-yellow-800";break;case"DEFECTIVE":l="bg-red-200",t="text-red-900"}return(0,s.jsx)("span",{className:"inline-flex items-center justify-center px-2 py-1 text-xs font-semibold rounded-md ".concat(l," ").concat(t),children:C(e.status)})}},{render:e=>{if(null==e.quantity)return(0,s.jsx)("span",{className:"text-gray-400",children:g("common.fields.empty")});let l="bg-gray-100",t="text-gray-800";return e.quantity<=1?(l="bg-red-100",t="text-red-800"):e.quantity>1&&e.quantity<=5&&(l="bg-yellow-100",t="text-yellow-800"),(0,s.jsx)("span",{className:"inline-flex items-center justify-center px-2 py-1 text-sm font-medium rounded-md min-w-[36px] ".concat(l," ").concat(t),children:e.quantity})}},{render:e=>null!=e.weight?(0,s.jsxs)("span",{className:"text-sm font-medium whitespace-nowrap",children:[e.weight," kg"]}):(0,s.jsx)("span",{className:"text-gray-400",children:g("common.fields.empty")})},{render:e=>e.supplier?(0,s.jsxs)("span",{className:"inline-flex items-center gap-2 px-3 py-1 text-sm font-medium text-indigo-800 bg-indigo-100 rounded-md",children:[(0,s.jsx)(n.soI,{size:16,className:"flex-shrink-0"}),(0,s.jsx)("span",{className:"truncate",children:e.supplier})]}):(0,s.jsx)("span",{className:"text-gray-400",children:g("common.fields.empty")})},{render:e=>(0,s.jsx)(c.n,{value:e.serialNumber,type:"copyable"})},{render:e=>e.observations?(0,s.jsx)(d.A,{title:e.observations,arrow:!0,placement:"left",children:(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)(n.MJW,{size:20,className:"text-gray-500 hover:text-gray-800 cursor-help transition-colors duration-200"})})}):null}],P=h?[{icon:(0,s.jsx)(n.Yvo,{size:16}),onRowAction:e=>f(e)},{icon:(0,s.jsx)(n.b6i,{size:16}),onRowAction:e=>A(e),onBulkAction:e=>A(e)},{label:g("common.actions.view"),icon:(0,s.jsx)(n.U3x,{size:16}),onRowAction:e=>console.log("Navigate to product",e.id)}]:[],D=(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(i.W,{data:l,actions:P,headerColumns:F,dataColumns:k,padding:{dataCell:{x:4,y:1.5}},...t})});return h?(0,s.jsxs)(s.Fragment,{children:[D,j&&(0,s.jsx)(m.i,{open:!0,product:j,onClose:()=>f(null),onSuccess:b}),(0,s.jsx)(u.C,{open:N.length>0,items:N,itemName:g("common.entities.product"),getIdentifier:e=>(null==e?void 0:e.id)?"#".concat(e.id):"",onConfirm:e=>{(0,v.Y)(e,E.mutate,w.mutate),y([])},onCancel:()=>y([])})]}):D}},46436:(e,l,t)=>{t.d(l,{i:()=>h});var s=t(73365);t(1521);var a=t(92222),r=t(49656),i=t(14748),n=t(75796),o=t(1824),d=t(10598),c=t(36115),u=t(17349),m=t(35227),p=t(92890);let v=(e,l,t)=>{let s=(0,m.A)({itemName:"Produs",initialValues:e,defaultValues:(0,u.getDefaultProductForm)(),itemId:null==e?void 0:e.id,onClose:l,onSuccess:t,createRecord:p.ZN.create,updateRecord:p.ZN.update,getCreateDto:u.convertProductFormToDto,getUpdateDto:u.convertProductFormToDto,validator:u.validateProductForm});return{form:s,handlers:{updateField:(e,l)=>s.setValues(e,l)}}};var x=t(36367);let h=e=>{var l,t,u,m,p,h,b,g,j,f,N,y,E,w,A,C,F,k,P,D;let{open:T=!0,product:L,onClose:I,onSuccess:S,variant:V}=e,{t:q}=(0,a.Bd)(),{form:z,handlers:R}=v(L,I,S),W=!!L,B=(0,s.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-5 space-y-6 text-graphite font-light",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"font-semibold mb-1 block",children:q("entities.product.productCode")}),(0,s.jsx)(r.A,{fullWidth:!0,value:z.values.productCode,onChange:e=>R.updateField("productCode",e.target.value),placeholder:q("common.placeholders.name"),error:!!(null===(l=z.validationErrors)||void 0===l?void 0:l.productCode),helperText:null===(t=z.validationErrors)||void 0===t?void 0:t.productCode})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"font-semibold mb-1 block",children:[q("common.fields.name")," ",(0,s.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,s.jsx)(r.A,{fullWidth:!0,required:!0,value:z.values.name,onChange:e=>R.updateField("name",e.target.value),placeholder:q("common.placeholders.name"),error:!!(null===(u=z.validationErrors)||void 0===u?void 0:u.name),helperText:null===(m=z.validationErrors)||void 0===m?void 0:m.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"font-semibold mb-1 block",children:q("common.fields.description")}),(0,s.jsx)("textarea",{rows:3,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:q("common.placeholders.description"),value:z.values.description,onChange:e=>R.updateField("description",e.target.value)}),(null===(p=z.validationErrors)||void 0===p?void 0:p.description)&&(0,s.jsx)("p",{className:"text-red-600 text-sm mt-1",children:z.validationErrors.description})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"font-semibold mb-1 block",children:[q("entities.product.category")," ",(0,s.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,s.jsx)(r.A,{fullWidth:!0,required:!0,value:z.values.category,onChange:e=>R.updateField("category",e.target.value),placeholder:q("common.placeholders.name"),error:!!(null===(h=z.validationErrors)||void 0===h?void 0:h.category),helperText:null===(b=z.validationErrors)||void 0===b?void 0:b.category})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"font-semibold mb-1 block",children:q("common.fields.unitPrice")}),(0,s.jsx)(x.HG,{customInput:r.A,fullWidth:!0,thousandSeparator:!0,decimalScale:2,allowNegative:!1,value:z.values.unitPrice,onValueChange:e=>{var l;return R.updateField("unitPrice",null!==(l=e.floatValue)&&void 0!==l?l:0)},placeholder:"0.00",inputProps:{step:"0.01",min:"0"},error:!!(null===(g=z.validationErrors)||void 0===g?void 0:g.unitPrice),helperText:null===(j=z.validationErrors)||void 0===j?void 0:j.unitPrice})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"font-semibold mb-1 block",children:q("common.fields.status")}),(0,s.jsxs)(i.A,{fullWidth:!0,error:!!(null===(f=z.validationErrors)||void 0===f?void 0:f.status),children:[(0,s.jsxs)(n.A,{value:z.values.status,onChange:e=>R.updateField("status",e.target.value),MenuProps:{disablePortal:!0},children:[(0,s.jsx)(o.A,{value:"AVAILABLE",children:(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),q("entities.product.status.available")]})}),(0,s.jsx)(o.A,{value:"UNAVAILABLE",children:(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full bg-slate-400"}),q("entities.product.status.unavailable")]})}),(0,s.jsx)(o.A,{value:"DEPLETED",children:(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full bg-rose-500"}),q("entities.product.status.depleted")]})}),(0,s.jsx)(o.A,{value:"ON_ORDER",children:(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full bg-amber-400"}),q("entities.product.status.on_order")]})}),(0,s.jsx)(o.A,{value:"DEFECTIVE",children:(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full bg-red-600"}),q("entities.product.status.defective")]})})]}),(null===(N=z.validationErrors)||void 0===N?void 0:N.status)&&(0,s.jsx)("p",{className:"text-red-600 text-sm mt-1",children:z.validationErrors.status})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"font-semibold mb-1 block",children:q("common.fields.quantity")}),(0,s.jsx)(r.A,{fullWidth:!0,type:"number",value:z.values.quantity,onChange:e=>R.updateField("quantity",Number(e.target.value)),placeholder:"0",inputProps:{min:"0"},error:!!(null===(y=z.validationErrors)||void 0===y?void 0:y.quantity),helperText:null===(E=z.validationErrors)||void 0===E?void 0:E.quantity})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"font-semibold mb-1 block",children:q("entities.product.weight")}),(0,s.jsx)(x.HG,{customInput:r.A,fullWidth:!0,thousandSeparator:!0,decimalScale:2,allowNegative:!1,value:z.values.weight,onValueChange:e=>{var l;return R.updateField("weight",null!==(l=e.floatValue)&&void 0!==l?l:0)},placeholder:"0.00",inputProps:{step:"0.01",min:"0"},error:!!(null===(w=z.validationErrors)||void 0===w?void 0:w.weight),helperText:null===(A=z.validationErrors)||void 0===A?void 0:A.weight})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"font-semibold mb-1 block",children:q("entities.product.supplier")}),(0,s.jsx)(r.A,{fullWidth:!0,value:z.values.supplier,onChange:e=>R.updateField("supplier",e.target.value),placeholder:q("common.placeholders.name"),error:!!(null===(C=z.validationErrors)||void 0===C?void 0:C.supplier),helperText:null===(F=z.validationErrors)||void 0===F?void 0:F.supplier})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"font-semibold mb-1 block",children:q("entities.product.serialNumber")}),(0,s.jsx)(r.A,{fullWidth:!0,value:z.values.serialNumber,onChange:e=>R.updateField("serialNumber",e.target.value),placeholder:q("common.placeholders.name"),error:!!(null===(k=z.validationErrors)||void 0===k?void 0:k.serialNumber),helperText:null===(P=z.validationErrors)||void 0===P?void 0:P.serialNumber})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"font-semibold mb-1 block",children:q("common.fields.observations")}),(0,s.jsx)("textarea",{rows:3,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:q("common.placeholders.description"),value:z.values.observations,onChange:e=>R.updateField("observations",e.target.value)}),(null===(D=z.validationErrors)||void 0===D?void 0:D.observations)&&(0,s.jsx)("p",{className:"text-red-600 text-sm mt-1",children:z.validationErrors.observations})]})]})});return(0,s.jsx)(c.I,{open:T,canSubmit:z.canSubmit,variant:V,title:q(W?"entities.product.edit":"entities.product.create"),titleIcon:(0,s.jsx)(d.A,{}),primaryActionLabel:q(W?"common.actions.save":"entities.product.create"),onSubmit:z.submit,onClose:I,onReset:z.reset,hasUnsavedChanges:z.isDirty,children:B})}},79092:(e,l,t)=>{t.d(l,{n:()=>n});var s=t(73365),a=t(1521),r=t(90301),i=t(61831);let n=e=>{let{value:l,type:t="text",tooltip:n,format:o}=e,[d,c]=(0,a.useState)(!1);switch(t){case"copyable":return l?(0,s.jsxs)("div",{className:"relative group flex items-center",children:[(0,s.jsx)("span",{className:"text-sm font-mono",children:l}),(0,s.jsx)("span",{onClick:()=>{l&&(navigator.clipboard.writeText(String(l)),c(!0),setTimeout(()=>c(!1),1500))},className:"absolute -right-2 cursor-pointer text-gray-400 opacity-0 group-hover:opacity-100 transition",title:"Copiază",children:d?(0,s.jsx)(i.g9_,{size:14,className:"text-blue-600"}):(0,s.jsx)(i.kn0,{size:14})})]}):(0,s.jsx)("span",{className:"text-gray-400",children:"—"});case"tooltip":return(0,s.jsx)(r.A,{title:null!=n?n:String(null!=l?l:"—"),arrow:!0,children:(0,s.jsx)("div",{className:"truncate",children:o?o(l):null!=l?l:"—"})});case"currency":return(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 font-medium whitespace-nowrap",children:[(0,s.jsx)(i.H4F,{size:16,className:"flex-shrink-0"}),(Number(l)||0).toFixed(2)]});default:return(0,s.jsx)("span",{children:o?o(l):null!=l?l:"—"})}}}}]);