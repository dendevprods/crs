"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[935],{32460:(e,t,i)=>{i.d(t,{A:()=>z,w:()=>D});var s=i(73365),n=i(1521),a=i(50627),l=i(92028),o=i(65873),r=i(31691),c=i(59296),d=i(85744),m=i(90301),x=i(87539),p=i(8378),u=i(578),g=i(67134),h=i(68290),v=i(14573),b=i(44845),y=i(79772),j=i(1384),f=i(27842),N=i(2718),k=i(67226),w=i(77259),C=i(94169),A=i(92222),D=function(e){return e.Dashboard="navigation.sidebar.dashboard",e.Tickets="navigation.sidebar.tickets",e.Clients="navigation.sidebar.clients",e.Employees="navigation.sidebar.employees",e.Departments="navigation.sidebar.departments",e.Products="navigation.sidebar.products",e.Services="navigation.sidebar.services",e.Billing="navigation.sidebar.billing",e.Reports="navigation.sidebar.reports",e.Settings="navigation.sidebar.settings",e}({});let S=[{text:"navigation.sidebar.dashboard",icon:(0,s.jsx)(g.A,{}),path:"/dashboard"},{text:"navigation.sidebar.tickets",icon:(0,s.jsx)(h.A,{}),path:"/tickets"},{text:"navigation.sidebar.clients",icon:(0,s.jsx)(v.A,{}),path:"/clients"},{text:"navigation.sidebar.employees",icon:(0,s.jsx)(b.A,{}),path:"/employees"},{text:"navigation.sidebar.departments",icon:(0,s.jsx)(y.A,{}),path:"/departments"},{text:"navigation.sidebar.products",icon:(0,s.jsx)(j.A,{}),path:"/products"},{text:"navigation.sidebar.services",icon:(0,s.jsx)(f.A,{}),path:"/services"},{text:"navigation.sidebar.billing",icon:(0,s.jsx)(N.A,{}),path:"/billing"},{text:"navigation.sidebar.reports",icon:(0,s.jsx)(k.A,{}),path:"/reports"},{text:"navigation.sidebar.settings",icon:(0,s.jsx)(w.A,{}),path:"/settings"}];function z(e){let{activeSection:t}=e,[i,g]=n.useState(!1),h=(0,a.useRouter)(),{t:v}=(0,A.Bd)();return(0,s.jsxs)(l.Ay,{variant:"permanent",open:i,sx:{width:i?240:60,flexShrink:0,"& .MuiDrawer-paper":{width:i?240:60,boxSizing:"border-box",overflowX:"hidden",transition:"width 0.3s"}},children:[(0,s.jsx)(o.A,{sx:{display:"flex",alignItems:"center",justifyContent:i?"flex-end":"center",padding:"8px 12px"},children:(0,s.jsx)(r.A,{onClick:()=>g(!i),size:"small",children:(0,s.jsx)(C.A,{})})}),(0,s.jsx)(c.A,{}),(0,s.jsx)(d.A,{children:S.map(e=>{let{text:n,icon:a,path:l}=e,o=n===t;return(0,s.jsx)(m.A,{title:i?"":v(n),placement:"right",arrow:!0,children:(0,s.jsxs)(x.A,{onClick:()=>h.push(l),selected:o,sx:{justifyContent:i?"initial":"center",px:2.5,bgcolor:o?"primary.main":"inherit",color:o?"common.black":"text.primary","& .MuiListItemIcon-root":{color:o?"common.black":"text.secondary",minWidth:0,mr:i?3:"auto",justifyContent:"center"},"&:hover":{bgcolor:o?"primary.dark":"action.hover"}},children:[(0,s.jsx)(p.A,{children:a}),i&&(0,s.jsx)(u.A,{primary:v(n)})]})},n)})})]})}},37380:(e,t,i)=>{i.d(t,{Y:()=>N});var s=i(73365),n=i(1521),a=i(92222),l=i(50627),o=i(40545),r=i(90301),c=i(61831),d=i(8646),m=i(23652),x=i(65587),p=i(35935),u=i(3408),g=i(32427),h=i(57972),v=i(68753),b=i(99849),y=i(52392),j=i(92890),f=i(67616);let N=e=>{let{data:t,options:i,withActions:N,onRefresh:k}=e,{t:w}=(0,a.Bd)(),C=(0,l.useRouter)(),[A,D]=(0,n.useState)(new Set),[S,z]=(0,n.useState)(null),[R,F]=(0,n.useState)([]),E=j.qB.useDelete({},{onSuccess:()=>null==k?void 0:k()}),B=j.qB.useDeleteMany({},{onSuccess:()=>null==k?void 0:k()}),T=e=>{D(t=>{let i=new Set(t);return i.has(e)?i.delete(e):i.add(e),i})},L=e=>{C.push("/tickets/".concat(e.id))},I=e=>{F(Array.isArray(e)?e:[e])},W=e=>{var t,i;let s=e.client;return s?"COMPANY"===s.type?(null===(t=s.company)||void 0===t?void 0:t.name)||w("entities.ticket.missingClient"):"PERSON"===s.type&&(null===(i=s.person)||void 0===i?void 0:i.fullName)||w("entities.ticket.missingClient"):w("entities.ticket.missingClient")},Y=[{label:w("common.fields.id"),align:"right",sortable:!0,sortFn:(e,t)=>e.id-t.id},{label:w("common.fields.status"),align:"center",sortable:!0,sortFn:(e,t)=>e.status.localeCompare(t.status)},{label:w("entities.ticket.priority"),align:"center",sortable:!0,sortFn:(e,t)=>{let i={URGENT:3,NORMAL:2,LOW:1};return(i[e.priority]||0)-(i[t.priority]||0)}},{label:w("entities.ticket.equipment"),align:"left",sortable:!0,sortFn:(e,t)=>e.equipmentDescription.localeCompare(t.equipmentDescription)},{label:w("common.entities.client"),align:"left",sortable:!0,sortFn:(e,t)=>W(e).localeCompare(W(t))},{label:w("entities.ticket.submittedAt"),align:"right",sortable:!0,sortFn:(e,t)=>new Date(e.submittedAt).getTime()-new Date(t.submittedAt).getTime()},{label:w("entities.ticket.estimatedDeliveryDate"),align:"right",sortable:!0,sortFn:(e,t)=>e.estimatedDeliveryDate||t.estimatedDeliveryDate?e.estimatedDeliveryDate?t.estimatedDeliveryDate?new Date(e.estimatedDeliveryDate).getTime()-new Date(t.estimatedDeliveryDate).getTime():-1:1:0},{label:w("entities.ticket.estimatedCost"),align:"center",sortable:!0,sortFn:(e,t)=>(e.estimatedCost||0)-(t.estimatedCost||0)},{label:w("entities.ticket.finalCost"),align:"center",sortable:!0,sortFn:(e,t)=>(e.finalCost||0)-(t.finalCost||0)},{label:w("entities.employee.plural"),align:"center",sortable:!0,sortFn:(e,t)=>{var i,s;return((null===(i=e.employees)||void 0===i?void 0:i.length)||0)-((null===(s=t.employees)||void 0===s?void 0:s.length)||0)}}],M=[{render:e=>(0,s.jsx)("div",{className:"px-4 py-2",children:(0,s.jsxs)("span",{className:"text-sm font-medium font-mono px-3 py-1 rounded ".concat("URGENT"===e.priority?"text-red-700 bg-red-50":"text-gray-600 bg-gray-50"),children:["#",e.id]})})},{render:e=>(0,s.jsx)("div",{className:"px-4 py-2",children:(0,s.jsx)(h.V,{currentState:e.status,scale:.9,displayOnly:!0})})},{render:e=>(0,s.jsx)("div",{className:"px-4 py-2 flex justify-center",children:"URGENT"===e.priority?(0,s.jsx)(d.GIx,{size:20,className:"text-red-600"}):(0,s.jsx)(o.A,{label:w("entities.ticket.priorityLevels.".concat(e.priority.toLowerCase())),size:"small",variant:"outlined",className:"capitalize font-semibold text-xs border-gray-300 text-gray-800"})})},{render:e=>(0,s.jsx)("div",{className:"px-4 py-2",children:(0,s.jsx)(r.A,{title:e.equipmentDescription,arrow:!0,children:(0,s.jsx)("div",{className:"text-sm font-medium max-w-xs truncate",children:e.equipmentDescription})})}),className:"bg-zinc-50"},{render:e=>{var t;return(0,s.jsx)("div",{className:"text-sm truncate font-medium p-4 ".concat((null===(t=e.client)||void 0===t?void 0:t.type)==="COMPANY"?"bg-blue-50 text-blue-950":"bg-green-50 text-green-950"),children:W(e)})}},{render:e=>(0,s.jsxs)("div",{className:"px-4 py-2 min-w-36",children:[(0,s.jsx)("div",{className:"text-sm",children:new Date(e.submittedAt).toLocaleDateString()}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:(0,m.m)(new Date(e.submittedAt),{addSuffix:!0,locale:x.ro})})]})},{render:e=>(0,s.jsx)("div",{className:"px-4 py-2 min-w-36 bg-".concat((0,v.C)(e)),children:e.estimatedDeliveryDate?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-sm",children:new Date(e.estimatedDeliveryDate).toLocaleDateString()}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:(0,m.m)(new Date(e.estimatedDeliveryDate),{addSuffix:!0,locale:x.ro})})]}):w("common.fields.empty")})},{render:e=>(0,s.jsx)("div",{className:"px-4 py-2 min-w-[96px]",children:e.estimatedCost?(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 font-medium whitespace-nowrap",children:[(0,s.jsx)(c.H4F,{size:16,className:"flex-shrink-0"}),e.estimatedCost.toFixed(2)]}):(0,s.jsx)("span",{className:"text-gray-400",children:w("common.fields.empty")})})},{render:e=>(0,s.jsx)("div",{className:"px-4 py-2 min-w-[96px]",children:e.finalCost?(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 font-medium whitespace-nowrap",children:[(0,s.jsx)(c.H4F,{size:16,className:"flex-shrink-0"}),e.finalCost.toFixed(2)]}):(0,s.jsx)("span",{className:"text-gray-400",children:w("common.fields.empty")})})},{render:e=>{var t;return(0,s.jsx)("div",{className:"px-4 py-2",children:(null===(t=e.employees)||void 0===t?void 0:t.length)?(0,s.jsx)(b.L,{isExpanded:A.has(e.id),onToggle:t=>{t.stopPropagation(),T(e.id)},count:e.employees.length}):(0,s.jsx)("span",{className:"text-gray-400",children:w("common.fields.empty")})})},expandedContent:{render:e=>{var t;return A.has(e.id)&&(null===(t=e.employees)||void 0===t?void 0:t.length)&&(0,s.jsx)(y.Q,{employees:e.employees||[],tableProps:{ignoreColumns:[5],pagination:{enabled:!1},search:{enabled:!1}}})},onClose:e=>T(e.id)},className:"px-6"}],P=N?[{icon:(0,s.jsx)(c.Yvo,{size:16}),onRowAction:e=>z(e)},{icon:(0,s.jsx)(c.b6i,{size:16}),onRowAction:e=>I(e),onBulkAction:e=>I(e)},{label:w("common.actions.view"),icon:(0,s.jsx)(c.U3x,{size:16}),onRowAction:L},{label:w("entities.ticket.assignEmployees"),icon:(0,s.jsx)(c.WZZ,{size:16}),onRowAction:e=>console.log("Assign ticket",e.id)},{label:w("common.actions.close"),icon:(0,s.jsx)(c.mU9,{size:16}),onRowAction:e=>console.log("Close ticket",e.id),onBulkAction:e=>console.log("Bulk close tickets")},{label:w("common.actions.reopen"),icon:(0,s.jsx)(c.m6K,{size:16}),onRowAction:e=>console.log("Reopen ticket",e.id),onBulkAction:e=>console.log("Bulk reopen tickets")}]:[],q=(0,s.jsx)(p.W,{data:t,actions:P,headerColumns:Y,dataColumns:M,onRowDoubleClick:L,ignoreColumns:null==i?void 0:i.ignoreColumns,...i});return N?(0,s.jsxs)(s.Fragment,{children:[q,S&&(0,s.jsx)(g.Z,{open:!0,ticket:S,variant:"modal",onSuccess:k,onClose:()=>z(null)}),(0,s.jsx)(u.C,{open:R.length>0,items:R,itemName:w("common.entities.ticket"),getIdentifier:e=>(null==e?void 0:e.id)?"#".concat(e.id):"",onConfirm:e=>{(0,f.Y)(e,E.mutate,B.mutate),F([])},onCancel:()=>F([])})]}):q}},39593:(e,t,i)=>{i.d(t,{A:()=>c});var s=i(73365);i(1521);var n=i(32460),a=i(44311);let l=e=>{let{title:t,titleIcon:i,actions:n=[],className:l=""}=e,o=!!t||!!i;return(0,s.jsxs)("div",{className:"p-4 flex items-center border-b border-gray-200 bg-white ".concat(o?"justify-between":"justify-start"," ").concat(l),children:[(0,s.jsxs)("h1",{className:"text-xl font-semibold text-graphite flex items-center gap-2",children:[i,t]}),(0,s.jsx)("div",{className:"flex gap-2",children:n.map(e=>(0,s.jsx)(a.r,{label:e.label,color:e.color,icon:e.icon,className:e.className,onClick:e.onClick},e.key))})]})};var o=i(31145),r=i(92222);function c(e){var t;let{activeSection:i,children:a,isLoading:c=!1,error:d,toolbar:m={},className:x=""}=e,{t:p}=(0,r.Bd)();return(0,s.jsxs)("div",{className:"flex min-h-screen",children:[(0,s.jsx)(n.A,{activeSection:i}),(0,s.jsxs)("div",{className:"flex-grow overflow-x-hidden ".concat(x),children:[m.actions&&(null===(t=m.actions)||void 0===t?void 0:t.length)>0&&(0,s.jsx)(l,{title:m.title,titleIcon:m.titleIcon,actions:m.actions,className:m.className}),(0,s.jsxs)("div",{className:"p-4",children:[c&&(0,s.jsx)(o.k,{message:p("common.status.loading")}),d&&(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center animate-fadeIn",children:[(0,s.jsx)("div",{className:"rounded-full bg-red-50 p-3 mb-4",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,s.jsx)("h2",{className:"text-lg font-medium text-gray-800 mb-1",children:p("common.ui.error.title")}),(0,s.jsx)("p",{className:"text-sm text-gray-500 max-w-md mb-4",children:p("common.ui.error.description")}),(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"px-3 py-1.5 rounded-md border border-gray-200 text-sm text-gray-700 hover:bg-gray-50 transition",children:p("common.actions.retry")})]}),!c&&!d&&(0,s.jsx)("div",{className:"animate-fadeIn",children:a})]})]})]})}},52392:(e,t,i)=>{i.d(t,{Q:()=>v});var s=i(73365),n=i(1521),a=i(50627),l=i(61831),o=i(35935),r=i(3408),c=i(17045),d=i(17349),m=i(28402),x=i(92222),p=i(37380),u=i(99849),g=i(92890),h=i(67616);let v=e=>{let{employees:t,tableProps:i,withActions:v=!1,refetch:b}=e,{t:y}=(0,x.Bd)(),[j,f]=(0,n.useState)(new Set),[N,k]=(0,n.useState)(null),[w,C]=(0,n.useState)([]),A=(0,a.useRouter)(),D=g.yD.useDelete({},{onSuccess:()=>null==b?void 0:b()}),S=g.yD.useDeleteMany({},{onSuccess:()=>null==b?void 0:b()}),z=e=>{f(t=>{let i=new Set(t);return i.has(e)?i.delete(e):i.add(e),i})},R=e=>A.push("/employees/".concat(e)),F=e=>{C(Array.isArray(e)?e:[e])},E=[{label:y("common.fields.id"),align:"right",sortable:!0,sortFn:(e,t)=>e.id-t.id},{label:y("entities.employee.fullName"),align:"left",sortable:!0,sortFn:(e,t)=>e.fullName.localeCompare(t.fullName,"ro",{sensitivity:"base"})},{label:y("common.fields.contact"),align:"left"},{label:y("common.entities.role"),align:"left",sortable:!0,sortFn:(e,t)=>{var i,s,n,a;return(null!==(n=null===(i=e.role)||void 0===i?void 0:i.name)&&void 0!==n?n:"").localeCompare(null!==(a=null===(s=t.role)||void 0===s?void 0:s.name)&&void 0!==a?a:"","ro",{sensitivity:"base"})}},{label:y("common.entities.department"),align:"left",sortable:!0,sortFn:(e,t)=>{var i,s,n,a;return(null!==(n=null===(i=e.department)||void 0===i?void 0:i.name)&&void 0!==n?n:"").localeCompare(null!==(a=null===(s=t.department)||void 0===s?void 0:s.name)&&void 0!==a?a:"","ro",{sensitivity:"base"})}},{label:y("entities.ticket.plural"),align:"center",sortable:!0,sortFn:(e,t)=>((0,d.isExpandedEmployeeWithTickets)(e)?e.tickets.length:0)-((0,d.isExpandedEmployeeWithTickets)(t)?t.tickets.length:0)}],B=[{render:e=>(0,s.jsx)("div",{className:"px-4 py-2",children:(0,s.jsxs)("span",{className:"text-sm font-mono font-medium bg-gray-50 text-gray-800 px-3 py-1.5 rounded",children:["#",e.id]})})},{render:e=>(0,s.jsx)("div",{className:"px-4 py-2 text-sm truncate font-medium",children:e.fullName||"—"}),className:"bg-zinc-50"},{render:e=>(0,s.jsxs)("div",{className:"px-4 py-2 flex flex-col gap-1 text-sm",children:[e.email?(0,s.jsxs)("a",{href:"mailto:".concat(e.email),className:"flex items-center gap-1 text-indigo-600 hover:text-blue-800 truncate",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)(l.mm2,{size:16})," ",e.email]}):(0,s.jsxs)("span",{className:"flex items-center gap-1 text-gray-400",children:[(0,s.jsx)(l.mm2,{size:16}),"—"]}),e.phone?(0,s.jsxs)("a",{href:"tel:".concat(e.phone),className:"flex items-center gap-1 text-slate-800 hover:text-blue-800 truncate",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)(l.EZw,{size:16})," ",e.phone]}):(0,s.jsxs)("span",{className:"flex items-center gap-1 text-gray-400",children:[(0,s.jsx)(l.EZw,{size:16}),"—"]})]})},{render:e=>{var t;return(null===(t=e.role)||void 0===t?void 0:t.name)?(0,s.jsxs)("span",{className:"inline-flex items-center gap-2 px-4 py-2 text-xs font-medium text-emerald-800 bg-emerald-100 rounded-md ring-1 ring-emerald-600/20",children:[(0,s.jsx)(l.r72,{size:14,className:"flex-shrink-0"}),(0,m.wR)(e.role.name)]}):(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-4 py-2 text-xs text-gray-600 bg-gray-100 rounded-md ring-1 ring-gray-300/20",children:[(0,s.jsx)(l.r72,{size:14,className:"flex-shrink-0"}),y("common.fields.empty")]})},className:"px-2"},{render:e=>{var t;return(null===(t=e.department)||void 0===t?void 0:t.name)?(0,s.jsxs)("span",{className:"inline-flex items-center gap-2 px-4 py-2 text-xs font-medium text-blue-800 bg-blue-100 rounded-md ring-1 ring-blue-600/20",children:[(0,s.jsx)(l.YG2,{size:14,className:"flex-shrink-0"}),(0,m.wR)(e.department.name)]}):(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-4 py-2 text-xs text-gray-600 bg-gray-100 rounded-md ring-1 ring-gray-300/20",children:[(0,s.jsx)(l.YG2,{size:14,className:"flex-shrink-0"}),y("common.fields.empty")]})}},{render:e=>{var t;return(0,d.isExpandedEmployeeWithTickets)(e)&&(null===(t=e.tickets)||void 0===t?void 0:t.length)?(0,s.jsx)(u.L,{isExpanded:j.has(e.id),onToggle:t=>{t.stopPropagation(),z(e.id)},count:e.tickets.length}):(0,s.jsx)("span",{className:"text-gray-400",children:"—"})},expandedContent:{render:e=>{var t;return(0,d.isExpandedEmployeeWithTickets)(e)&&j.has(e.id)&&(null===(t=e.tickets)||void 0===t?void 0:t.length)?(0,s.jsx)(p.Y,{data:e.tickets,options:{ignoreColumns:[10],classNames:{container:"rounded-md overflow-x-auto shadow-xl border border-gray-200"},search:{enabled:!1}}}):null},onClose:e=>z(e.id)},className:"px-6"}],T=v?[{icon:(0,s.jsx)(l.Yvo,{size:16}),onRowAction:e=>k(e)},{icon:(0,s.jsx)(l.b6i,{size:16}),onRowAction:e=>F(e),onBulkAction:e=>F(e)},{label:y("common.actions.view"),icon:(0,s.jsx)(l.U3x,{size:16}),onRowAction:e=>R(e.id)}]:void 0;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.W,{data:t,actions:T,headerColumns:E,dataColumns:B,...i}),N&&(0,s.jsx)(c.N,{open:!0,employee:N,variant:"modal",onClose:()=>k(null),onRefresh:b}),(0,s.jsx)(r.C,{open:w.length>0,items:w,itemName:y("common.entities.employee"),getIdentifier:e=>(null==e?void 0:e.id)?"#".concat(e.id):"",onConfirm:e=>{(0,h.Y)(e,D.mutate,S.mutate),C([])},onCancel:()=>C([])})]})}},59255:(e,t,i)=>{i.d(t,{u:()=>n});var s=i(1521);function n(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[t,i]=(0,s.useState)(e);return{isOpen:t,setIsOpen:i,open:()=>i(!0),close:()=>i(!1),toggle:()=>i(e=>!e)}}}}]);