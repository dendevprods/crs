"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[980],{32498:(e,l,a)=>{a.d(l,{y:()=>f});var i=a(73365),s=a(1521),o=a(92222),n=a(49656),r=a(14748),t=a(75796),d=a(1824),c=a(87363),m=a(36115),u=a(36367),v=a(55417),p=a(17349),x=a(35227),h=a(92890);let b=(e,l,a)=>{let i=(0,x.A)({itemName:"Serviciu",initialValues:e,defaultValues:(0,p.getDefaultServiceForm)(),itemId:null==e?void 0:e.id,onClose:l,onSuccess:a,createRecord:h.XU.create,updateRecord:h.XU.update,getCreateDto:p.convertServiceFormToDto,getUpdateDto:p.convertServiceFormToDto,validator:p.validateServiceForm});return{form:i,handlers:{updateField:(e,l)=>i.setValues(e,l)}}},f=e=>{var l,a,p,x,h,f,j,g,N,y;let{open:C,service:F,variant:w,onClose:A,onSuccess:E}=e,{t:S}=(0,o.Bd)(),{form:k,handlers:z}=b(F,A,E),[D,U]=(0,s.useState)(!0),I=!!F,R=[{value:0,label:S("common.fields.custom")},{value:15,label:"15 ".concat(S("common.fields.minutes"))},{value:30,label:"30 ".concat(S("common.fields.minutes"))},{value:45,label:"45 ".concat(S("common.fields.minutes"))},{value:60,label:"1 ".concat(S("common.fields.hour"))},{value:90,label:"1 ".concat(S("common.fields.hour")," 30 ").concat(S("common.fields.minutes"))},{value:120,label:"2 ".concat(S("common.fields.hours"))},{value:180,label:"3 ".concat(S("common.fields.hours"))},{value:240,label:"4 ".concat(S("common.fields.hours"))},{value:300,label:"5 ".concat(S("common.fields.hours"))},{value:360,label:"6 ".concat(S("common.fields.hours"))}],T=(0,i.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,i.jsxs)("div",{className:"p-5 space-y-6 text-graphite font-light",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"font-semibold mb-1 block",children:[S("entities.service.serviceCode")," ",(0,i.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,i.jsx)(n.A,{fullWidth:!0,required:!0,value:k.values.serviceCode,onChange:e=>z.updateField("serviceCode",e.target.value),placeholder:S("common.placeholders.name"),error:!!(null===(l=k.validationErrors)||void 0===l?void 0:l.serviceCode),helperText:null===(a=k.validationErrors)||void 0===a?void 0:a.serviceCode})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"font-semibold mb-1 block",children:[S("common.fields.name")," ",(0,i.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,i.jsx)(n.A,{fullWidth:!0,required:!0,value:k.values.name,onChange:e=>z.updateField("name",e.target.value),placeholder:S("common.placeholders.name"),error:!!(null===(p=k.validationErrors)||void 0===p?void 0:p.name),helperText:null===(x=k.validationErrors)||void 0===x?void 0:x.name})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"font-semibold mb-1 block",children:S("common.fields.description")}),(0,i.jsx)("textarea",{rows:3,value:k.values.description,onChange:e=>z.updateField("description",e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",placeholder:S("common.placeholders.description")}),(null===(h=k.validationErrors)||void 0===h?void 0:h.description)&&(0,i.jsx)("p",{className:"text-red-600 text-sm mt-1",children:k.validationErrors.description})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"font-semibold mb-1 block",children:S("entities.service.duration")}),(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsxs)(r.A,{fullWidth:!0,error:!!(null===(f=k.validationErrors)||void 0===f?void 0:f.duration),children:[(0,i.jsx)(t.A,{value:D?0:k.values.duration,onChange:e=>{let l=Number(e.target.value);U(0===l),z.updateField("duration",l)},displayEmpty:!0,MenuProps:{disablePortal:!0},children:R.map(e=>(0,i.jsx)(d.A,{value:e.value,children:(0,i.jsxs)("span",{className:"flex items-center gap-2",children:[(0,i.jsx)(c.w_X,{size:14,className:"text-gray-500"}),e.label]})},e.value))}),(null===(j=k.validationErrors)||void 0===j?void 0:j.duration)&&(0,i.jsx)("p",{className:"text-red-600 text-sm mt-1",children:k.validationErrors.duration})]}),D&&(0,i.jsx)("div",{className:"flex items-center justify-center",children:(0,i.jsx)(v.A,{defaultMinutes:k.values.duration,onChange:e=>z.updateField("duration",e)})})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"font-semibold mb-1 block",children:[S("common.fields.price")," ",(0,i.jsx)("span",{className:"text-red-600",children:"*"})]}),(0,i.jsx)(u.HG,{customInput:n.A,fullWidth:!0,thousandSeparator:!0,decimalScale:2,allowNegative:!1,required:!0,value:k.values.price,onValueChange:e=>{var l;return z.updateField("price",null!==(l=e.floatValue)&&void 0!==l?l:0)},placeholder:"0.00",inputProps:{step:"0.01",min:"0"},error:!!(null===(g=k.validationErrors)||void 0===g?void 0:g.price),helperText:null===(N=k.validationErrors)||void 0===N?void 0:N.price})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"font-semibold mb-1 block",children:S("common.fields.observations")}),(0,i.jsx)("textarea",{rows:3,value:k.values.observations,onChange:e=>z.updateField("observations",e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",placeholder:S("common.placeholders.description")}),(null===(y=k.validationErrors)||void 0===y?void 0:y.observations)&&(0,i.jsx)("p",{className:"text-red-600 text-sm mt-1",children:k.validationErrors.observations})]})]})}),V=c.xdT,W=I?c.uO9:c.OiG;return(0,i.jsx)(m.I,{open:C,canSubmit:k.canSubmit,variant:w,title:S(I?"entities.service.edit":"entities.service.create"),titleIcon:(0,i.jsx)(V,{size:22}),primaryActionLabel:S(I?"common.actions.save":"entities.service.create"),primaryActionIcon:(0,i.jsx)(W,{}),onSubmit:k.submit,onClose:A,onReset:k.reset,hasUnsavedChanges:k.isDirty,children:T})}},90980:(e,l,a)=>{a.d(l,{v:()=>p});var i=a(73365),s=a(1521),o=a(92222),n=a(35935),r=a(61831),t=a(90301),d=a(79092),c=a(3408),m=a(32498),u=a(92890),v=a(67616);let p=e=>{let{services:l,tableProps:a,withActions:p=!1,refetch:x}=e,{t:h}=(0,o.Bd)(),[b,f]=(0,s.useState)(null),[j,g]=(0,s.useState)([]),N=u.XU.useDelete({},{onSuccess:()=>null==x?void 0:x()}),y=u.XU.useDeleteMany({},{onSuccess:()=>null==x?void 0:x()}),C=e=>{g(Array.isArray(e)?e:[e])},F=[{label:h("common.fields.id"),align:"right",sortable:!0,sortFn:(e,l)=>e.id-l.id},{label:h("entities.service.serviceCode"),align:"left"},{label:h("common.fields.name"),align:"left",sortable:!0,sortFn:(e,l)=>e.name.localeCompare(l.name,"ro",{sensitivity:"base"})},{label:h("common.fields.description"),align:"left"},{label:h("entities.service.duration"),align:"center",sortable:!0,sortFn:(e,l)=>(e.duration||0)-(l.duration||0)},{label:h("common.fields.price"),align:"right",sortable:!0,sortFn:(e,l)=>e.price-l.price},{label:h("common.fields.observations"),align:"center"}],w=[{render:e=>(0,i.jsxs)("span",{className:"font-mono text-sm px-3 py-1 bg-gray-50 rounded",children:["#",e.id]})},{render:e=>(0,i.jsx)(d.n,{value:e.serviceCode,type:"copyable"})},{render:e=>(0,i.jsx)("span",{className:"font-medium truncate",children:e.name}),className:"bg-zinc-50"},{render:e=>{var l,a;return(0,i.jsx)("div",{className:"px-4 py-2",children:(0,i.jsx)(t.A,{title:null!==(l=e.description)&&void 0!==l?l:h("common.fields.empty"),arrow:!0,children:(0,i.jsx)("div",{className:"text-sm font-medium max-w-[200px] truncate",children:null!==(a=e.description)&&void 0!==a?a:h("common.fields.empty")})})})},className:"bg-zinc-50"},{render:e=>e.duration?(0,i.jsxs)("span",{className:"inline-flex items-center gap-2 text-sm font-medium",children:[(0,i.jsx)(r.VP9,{size:16,className:"flex-shrink-0"}),(e=>{let l=Math.floor(e/60),a=e%60;return[l?"".concat(l,"h"):"",a?"".concat(a,"'"):""].filter(Boolean).join(" ")})(e.duration)]}):(0,i.jsx)("span",{className:"text-gray-400",children:h("common.fields.empty")})},{render:e=>{var l;return(0,i.jsxs)("span",{className:"inline-flex items-center gap-1 font-medium whitespace-nowrap",children:[(0,i.jsx)(r.H4F,{size:16,className:"flex-shrink-0"}),(null!==(l=e.price)&&void 0!==l?l:0).toFixed(2)]})}},{render:e=>e.observations?(0,i.jsx)(t.A,{title:e.observations,arrow:!0,placement:"left",children:(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsx)(r.MJW,{size:20,className:"text-gray-500 hover:text-gray-800 cursor-help transition-colors duration-200"})})}):null}],A=p?[{icon:(0,i.jsx)(r.Yvo,{size:16}),onRowAction:e=>f(e)},{icon:(0,i.jsx)(r.b6i,{size:16}),onRowAction:e=>C(e),onBulkAction:e=>C(e)},{label:h("common.actions.view"),icon:(0,i.jsx)(r.U3x,{size:16}),onRowAction:e=>console.log("Navigate to service",e.id)}]:[],E=(0,i.jsx)(n.W,{data:l,actions:A,headerColumns:F,dataColumns:w,padding:{dataCell:{x:4,y:1.5}},ignoreColumns:null==a?void 0:a.ignoreColumns,...a});return p?(0,i.jsxs)(i.Fragment,{children:[E,b&&(0,i.jsx)(m.y,{open:!0,service:b,onClose:()=>f(null),onSuccess:x}),(0,i.jsx)(c.C,{open:j.length>0,items:j,itemName:h("common.entities.service"),getIdentifier:e=>(null==e?void 0:e.id)?"#".concat(e.id):"",onConfirm:e=>{(0,v.Y)(e,N.mutate,y.mutate),g([])},onCancel:()=>g([])})]}):E}}}]);