(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[516],{3677:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var i=s(93439),a=s(73365);let n=(0,i.A)([(0,a.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,a.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime")},21508:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>P});var i=s(73365),a=s(1521),n=s(32460),r=s(87363),l=s(59255),c=s(64225),o=s(39593),d=s(32427),x=s(3677),m=s(27842),u=s(93439);let p=(0,u.A)((0,i.jsx)("path",{d:"M21 8V7l-3 2-3-2v1l3 2zm1-5H2C.9 3 0 3.9 0 5v14c0 1.1.9 2 2 2h20c1.1 0 1.99-.9 1.99-2L24 5c0-1.1-.9-2-2-2M8 6c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3m6 12H2v-1c0-2 4-3.1 6-3.1s6 1.1 6 3.1zm8-6h-8V6h8z"}),"ContactMail");var h=s(13286),j=s(22840),b=s(17349);let N=(e,t,s,a)=>(0,i.jsxs)("div",{className:"flex flex-col cursor-pointer group",title:t,children:[(0,i.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-md group-hover:border-opacity-60 transition-colors duration-150",children:[(0,i.jsx)("div",{className:"text-sm opacity-70",children:a}),(0,i.jsx)("span",{className:"font-semibold text-gray-600 text-base tabular-nums",children:s.toLocaleString()})]}),(0,i.jsx)("span",{className:"text-gray-600 text-xs font-medium px-1",children:e})]}),f={REGISTERED:{label:"entities.ticket.statusGroups.registered.label",description:"entities.ticket.statusGroups.registered.description",icon:(0,i.jsx)(x.A,{sx:{fontSize:20}}),textColor:"text-blue-500",renderTab:(e,t)=>N(t("entities.ticket.statusGroups.registered.label"),t("entities.ticket.statusGroups.registered.description"),e,(0,i.jsx)(x.A,{sx:{fontSize:20}}))},IN_PROGRESS:{label:"entities.ticket.statusGroups.inProgress.label",description:"entities.ticket.statusGroups.inProgress.description",icon:(0,i.jsx)(m.A,{sx:{fontSize:20}}),textColor:"text-sky-500",renderTab:(e,t)=>N(t("entities.ticket.statusGroups.inProgress.label"),t("entities.ticket.statusGroups.inProgress.description"),e,(0,i.jsx)(m.A,{sx:{fontSize:20}}))},WAITING_CLIENT:{label:"entities.ticket.statusGroups.waitingClient.label",description:"entities.ticket.statusGroups.waitingClient.description",icon:(0,i.jsx)(p,{sx:{fontSize:20}}),textColor:"text-amber-500",renderTab:(e,t)=>N(t("entities.ticket.statusGroups.waitingClient.label"),t("entities.ticket.statusGroups.waitingClient.description"),e,(0,i.jsx)(p,{sx:{fontSize:20}}))},RESOLVED:{label:"entities.ticket.statusGroups.resolved.label",description:"entities.ticket.statusGroups.resolved.description",icon:(0,i.jsx)(h.A,{sx:{fontSize:20}}),textColor:"text-green-500",renderTab:(e,t)=>N(t("entities.ticket.statusGroups.resolved.label"),t("entities.ticket.statusGroups.resolved.description"),e,(0,i.jsx)(h.A,{sx:{fontSize:20}}))},CANCELLED:{label:"entities.ticket.statusGroups.canceled.label",description:"entities.ticket.statusGroups.canceled.description",icon:(0,i.jsx)(j.A,{sx:{fontSize:20}}),textColor:"text-red-500",renderTab:(e,t)=>N(t("entities.ticket.statusGroups.canceled.label"),t("entities.ticket.statusGroups.canceled.description"),e,(0,i.jsx)(j.A,{sx:{fontSize:20}}))}},v={[b.OrderStatus.NEW]:"REGISTERED",[b.OrderStatus.TAKEN]:"REGISTERED",[b.OrderStatus.IN_PROGRESS]:"IN_PROGRESS",[b.OrderStatus.IN_TESTING]:"IN_PROGRESS",[b.OrderStatus.APPROVED]:"WAITING_CLIENT",[b.OrderStatus.CONTACT_CLIENT]:"WAITING_CLIENT",[b.OrderStatus.WAITING_CLIENT]:"WAITING_CLIENT",[b.OrderStatus.COMPLETED]:"RESOLVED",[b.OrderStatus.DELIVERED]:"RESOLVED",[b.OrderStatus.CANCELLED]:"CANCELLED"};var g=s(82537);let k=(0,u.A)((0,i.jsx)("path",{d:"M19 3H4.99c-1.11 0-1.98.89-1.98 2L3 19c0 1.1.88 2 1.99 2H19c1.1 0 2-.9 2-2V5c0-1.11-.9-2-2-2m0 12h-4c0 1.66-1.35 3-3 3s-3-1.34-3-3H4.99V5H19z"}),"Inbox");var C=s(92222),y=s(75135),E=s(37380),A=s(36910),S=s(55964),T=s(59296),G=s(50627),w=s(9278),I=s(8646),O=s(23652),R=s(65587),L=s(57972),M=s(12525);let D=e=>{let{ticket:t,onTicketChange:s}=e,{t:a}=(0,C.Bd)(),n=(0,G.useRouter)();return(0,i.jsx)(A.A,{sx:{width:280},elevation:2,children:(0,i.jsxs)(S.A,{className:"space-y-3 p-4 cursor-pointer",onClick:()=>{n.push("/tickets/".concat(t.id))},children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("div",{className:"border bg-black/5 border-black/20 py-1 px-2 rounded-lg",children:(0,i.jsx)(M.kW,{status:t.status,size:20})}),(0,i.jsxs)("div",{className:"flex items-center text-blue-600",children:[(0,i.jsx)(w.KZj,{size:20}),(0,i.jsx)("span",{className:"text-lg font-bold",children:t.id})]})]}),"URGENT"===t.priority&&(0,i.jsx)(I.GIx,{size:20,color:"#ca212a"})]}),(0,i.jsx)(T.A,{}),(0,i.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,i.jsxs)("span",{className:"text-graphite/80",children:[a("common.fields.status"),":"]}),(0,i.jsx)(L.V,{currentState:t.status,ticketId:t.id,onStateChange:()=>null==s?void 0:s()})]}),(0,i.jsxs)("div",{className:"text-sm",children:[(0,i.jsxs)("p",{className:"text-graphite/80 mb-1",children:[a("entities.ticket.equipment"),":"]}),(0,i.jsx)("div",{className:"p-2 text-sm font-medium text-black/90 bg-black/5 rounded-md",children:t.equipmentDescription})]}),t.observations&&(0,i.jsxs)("div",{className:"text-sm",children:[(0,i.jsxs)("p",{className:"text-graphite/80 mb-1",children:[a("common.fields.observations"),":"]}),(0,i.jsx)("div",{className:"p-2 text-xs text-black/90 bg-black/5 rounded-md",children:t.observations})]}),(0,b.isExpandedTicket)(t)&&(0,i.jsx)("div",{className:"text-sm space-y-2 py-2",children:(0,i.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-2 space-y-1",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("span",{className:"text-graphite/80 font-medium",children:[a("common.entities.client"),":"]}),(0,i.jsx)("span",{className:"font-semibold text-blue-900",children:(e=>"COMPANY"===e.type&&e.company?e.company.name:"PERSON"===e.type&&e.person?e.person.fullName:a("entities.ticket.missingClient"))(t.client)})]}),t.representative&&(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("span",{className:"text-graphite/80 font-medium",children:[a("common.entities.representative"),":"]}),(0,i.jsx)("span",{className:"font-semibold text-blue-900",children:t.representative.person.fullName})]})]})}),(0,b.isExpandedTicket)(t)&&t.employees&&t.employees.length>0&&(0,i.jsx)("div",{className:"text-sm",children:(0,i.jsxs)("div",{className:"flex justify-between items-start",children:[(0,i.jsxs)("span",{className:"text-graphite/80",children:[a("common.entities.employee",{count:2}),":"]}),(0,i.jsx)("div",{className:"rounded-md border border-gray-300 overflow-hidden",children:t.employees.map((e,s)=>(0,i.jsx)("div",{className:"px-2 py-1 text-sm font-medium text-black ".concat(s!==t.employees.length-1?"border-b border-gray-300":""),children:e.fullName},e.id))})]})}),(0,i.jsxs)("div",{className:"text-sm space-y-1",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("span",{className:"text-graphite/80",children:[a("entities.ticket.estimatedCost"),":"]}),(0,i.jsxs)("span",{className:"font-medium text-black",children:[t.estimatedCost," ",a("common.currency")]})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("span",{className:"text-graphite/80",children:[a("entities.ticket.finalCost"),":"]}),(0,i.jsxs)("span",{className:"font-medium text-black",children:[t.finalCost," ",a("common.currency")]})]}),t.estimatedExecutionTime&&(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsxs)("span",{className:"text-graphite/80",children:[a("entities.ticket.estimatedExecutionTime"),":"]}),(0,i.jsxs)("span",{className:"font-medium text-black",children:[t.estimatedExecutionTime,"h"]})]})]}),(0,i.jsx)("div",{className:"text-sm",children:(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("span",{className:"text-graphite/80",children:[a("entities.ticket.submittedAt"),":"]}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("div",{className:"font-medium text-black text-xs",children:new Date(t.submittedAt).toLocaleDateString()}),(0,i.jsx)("div",{className:"text-gray-500 text-xs",children:(0,O.m)(new Date(t.submittedAt),{addSuffix:!0,locale:R.ro})})]})]})})]})})},z=e=>{let{tickets:t,onTicketChange:s,viewType:n="cards"}=e,{t:r}=(0,C.Bd)(),[l,c]=(0,a.useState)({});(0,a.useEffect)(()=>{let e={};for(let s of(Object.keys(f).forEach(t=>{e[t]=[]}),t||[]))e[v[s.status]].push(s);c(e)},[t]);let o=[{key:"all",label:r("common.status.all"),icon:(0,i.jsx)(k,{}),count:t.length,content:"cards"===n?(0,i.jsx)(g.b,{items:t,renderItem:e=>(0,i.jsx)(D,{ticket:e,onTicketChange:()=>null==s?void 0:s()},e.id),emptyMessage:r("states.empty.noData")}):(0,i.jsx)(E.Y,{data:t,withActions:!0,onRefresh:s})},...Object.keys(f).map(e=>{var t;let a=null!==(t=l[e])&&void 0!==t?t:[],c=f[e],o="cards"===n?(0,i.jsx)(g.b,{items:a,renderItem:e=>(0,i.jsx)(D,{ticket:e,onTicketChange:()=>null==s?void 0:s()},e.id),emptyMessage:r("states.empty.noData")}):(0,i.jsx)(E.Y,{data:a,withActions:!0,onRefresh:s});return{key:e,label:c.renderTab(a.length,r),content:o,textColor:c.textColor}})];return(0,i.jsx)(y.t,{tabs:o})};var _=s(92890);function P(){let{t:e}=(0,C.Bd)(),{data:t,isLoading:s,error:a,refetch:x}=_.qB.useGetAll({query:{includeDetails:!0,sort:"desc"}}),{isOpen:m,open:u,close:p}=(0,l.u)(),{viewType:h,toggleView:j,is:b}=(0,c.M)("table",["table","cards"]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.A,{activeSection:n.w.Tickets,isLoading:s,error:a,toolbar:{title:e("entities.ticket.plural"),actions:[{key:"add-ticket",label:e("common.actions.add"),icon:(0,i.jsx)(r.OiG,{}),onClick:u},{key:"toggle-view",label:e(b("table")?"common.ui.cards":"common.ui.table"),color:"white",icon:b("table")?(0,i.jsx)(r.QJV,{}):(0,i.jsx)(r.ist,{}),onClick:j}]},children:t&&(0,i.jsx)(z,{tickets:t,viewType:h,onTicketChange:x})}),(0,i.jsx)(d.Z,{open:m,variant:"modal",onClose:p,onSuccess:x})]})}},36910:(e,t,s)=>{"use strict";s.d(t,{A:()=>h});var i=s(1521),a=s(74584),n=s(87468),r=s(85445),l=s(96028),c=s(97907),o=s(33246),d=s(16850);function x(e){return(0,d.Ay)("MuiCard",e)}(0,o.A)("MuiCard",["root"]);var m=s(73365);let u=e=>{let{classes:t}=e;return(0,n.A)({root:["root"]},x,t)},p=(0,r.Ay)(c.A,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),h=i.forwardRef(function(e,t){let s=(0,l.b)({props:e,name:"MuiCard"}),{className:i,raised:n=!1,...r}=s,c={...s,raised:n},o=u(c);return(0,m.jsx)(p,{className:(0,a.A)(o.root,i),elevation:n?8:void 0,ref:t,ownerState:c,...r})})},55964:(e,t,s)=>{"use strict";s.d(t,{A:()=>p});var i=s(1521),a=s(74584),n=s(87468),r=s(85445),l=s(96028),c=s(33246),o=s(16850);function d(e){return(0,o.Ay)("MuiCardContent",e)}(0,c.A)("MuiCardContent",["root"]);var x=s(73365);let m=e=>{let{classes:t}=e;return(0,n.A)({root:["root"]},d,t)},u=(0,r.Ay)("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),p=i.forwardRef(function(e,t){let s=(0,l.b)({props:e,name:"MuiCardContent"}),{className:i,component:n="div",...r}=s,c={...s,component:n},o=m(c);return(0,x.jsx)(u,{as:n,className:(0,a.A)(o.root,i),ownerState:c,ref:t,...r})})},64225:(e,t,s)=>{"use strict";s.d(t,{M:()=>a});var i=s(1521);function a(e,t){let[s,a]=(0,i.useState)(e);return{viewType:s,setViewType:a,toggleView:()=>{if(t&&t.length>1){let e=(t.indexOf(s)+1)%t.length;a(t[e])}},is:e=>s===e}}},82537:(e,t,s)=>{"use strict";s.d(t,{b:()=>a});var i=s(73365);s(1521);let a=e=>{let{items:t,renderItem:s,emptyMessage:a,minHeight:n=200}=e;return(0,i.jsx)("div",{className:"p-4 items-center justify-center",style:{minHeight:n},children:t&&t.length>0?(0,i.jsx)("div",{className:"flex flex-wrap gap-4",children:t.map(s)}):(0,i.jsx)("div",{className:"text-gray-500 text-sm text-center",children:a})})}},98688:(e,t,s)=>{Promise.resolve().then(s.bind(s,21508))}},e=>{var t=t=>e(e.s=t);e.O(0,[422,915,596,371,616,149,140,829,770,278,222,671,367,930,791,440,207,420,935,347,870,358],()=>t(98688)),_N_E=e.O()}]);