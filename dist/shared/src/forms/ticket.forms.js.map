{"version":3,"sources":["../../../../shared/src/forms/ticket.forms.ts"],"sourcesContent":["import { Client, CompanyRepresentative, Employee, OrderPriority, OrderStatus } from \"generated/prisma\";\nimport { CreateTicketDto, UpdateTicketStatusDto, AssignEmployeesDto } from \"../types/dtos/ticket.dto\";\nimport { ExpandedClient, ExpandedCompanyRepresentative, ExpandedEmployee } from \"../types/prisma.types\";\n\nconst toDateStringSafe = (value?: string | null): string => {\n  const date = new Date(value || '');\n  if (isNaN(date.getTime())) return ''; \n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, '0');\n  const day = String(date.getDate()).padStart(2, '0');\n  return `${year}-${month}-${day}`;\n};\n\nexport type TicketForm = {\n  equipmentDescription: string;\n  imageUrl: string;\n  priority: OrderPriority;\n  client: Client | ExpandedClient | null;\n  representative: CompanyRepresentative | ExpandedCompanyRepresentative | null ;\n  status: OrderStatus;\n  estimatedCost: number;\n  estimatedDeliveryDate: string | null;\n  estimatedExecutionTime: number;\n  observations: string;\n  employees: (Employee | ExpandedEmployee)[];\n};\n\nexport type UpdateTicketStatusForm = {\n  status: OrderStatus;\n};\n\nexport type AssignEmployeesForm = {\n  employees: (Employee | ExpandedEmployee)[];\n};\n\nexport const getDefaultTicketForm = (): TicketForm => ({\n  equipmentDescription: '',\n  imageUrl: '',\n  priority: OrderPriority.NORMAL,\n  client: null,\n  representative: null,\n  status: OrderStatus.NEW,\n  estimatedCost: 0,\n  estimatedDeliveryDate: null,\n  estimatedExecutionTime: 0,\n  observations: '',\n  employees: [] as (Employee | ExpandedEmployee)[]\n});\n\nexport const getDefaultUpdateTicketStatusForm = (): UpdateTicketStatusForm => ({\n  status: OrderStatus.NEW\n});\n\nexport const getDefaultAssignEmployeesForm = (): AssignEmployeesForm => ({\n  employees: [] as (Employee | ExpandedEmployee)[]\n});\n\nexport const convertTicketFormToDto = (form: TicketForm): CreateTicketDto => ({\n  equipmentDescription: form.equipmentDescription,\n  imageUrl: form.imageUrl || null,\n  priority: form.priority,\n  clientId: form.client!.id,\n  personRepresentativeId: form.representative?.personId || null,\n  companyRepresentativeId: form.representative?.companyId || null,\n  status: form.status,\n  estimatedCost: form.estimatedCost || null,\n  estimatedDeliveryDate: toDateStringSafe(form.estimatedDeliveryDate),\n  estimatedExecutionTime: form.estimatedExecutionTime || null,\n  observations: form.observations || null,\n  employeeIds: form.employees.map(e => e.id),\n});\n\nexport const convertUpdateTicketStatusFormToDto = (form: UpdateTicketStatusForm): UpdateTicketStatusDto => ({\n  status: form.status\n});\n\nexport const convertAssignEmployeesFormToDto = (form: AssignEmployeesForm): AssignEmployeesDto => ({\n  employeeIds: form.employees.map(e => e.id)\n});"],"names":["convertAssignEmployeesFormToDto","convertTicketFormToDto","convertUpdateTicketStatusFormToDto","getDefaultAssignEmployeesForm","getDefaultTicketForm","getDefaultUpdateTicketStatusForm","toDateStringSafe","value","date","Date","isNaN","getTime","year","getFullYear","month","String","getMonth","padStart","day","getDate","equipmentDescription","imageUrl","priority","OrderPriority","NORMAL","client","representative","status","OrderStatus","NEW","estimatedCost","estimatedDeliveryDate","estimatedExecutionTime","observations","employees","form","clientId","id","personRepresentativeId","personId","companyRepresentativeId","companyId","employeeIds","map","e"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;;;;;;;;IA4EaA,+BAA+B;eAA/BA;;IAnBAC,sBAAsB;eAAtBA;;IAeAC,kCAAkC;eAAlCA;;IAnBAC,6BAA6B;eAA7BA;;IAlBAC,oBAAoB;eAApBA;;IAcAC,gCAAgC;eAAhCA;;;wBAjDuE;AAIpF,MAAMC,mBAAmB,CAACC;IACxB,MAAMC,OAAO,IAAIC,KAAKF,SAAS;IAC/B,IAAIG,MAAMF,KAAKG,OAAO,KAAK,OAAO;IAClC,MAAMC,OAAOJ,KAAKK,WAAW;IAC7B,MAAMC,QAAQC,OAAOP,KAAKQ,QAAQ,KAAK,GAAGC,QAAQ,CAAC,GAAG;IACtD,MAAMC,MAAMH,OAAOP,KAAKW,OAAO,IAAIF,QAAQ,CAAC,GAAG;IAC/C,OAAO,CAAC,EAAEL,KAAK,CAAC,EAAEE,MAAM,CAAC,EAAEI,IAAI,CAAC;AAClC;AAwBO,MAAMd,uBAAuB,IAAmB,CAAA;QACrDgB,sBAAsB;QACtBC,UAAU;QACVC,UAAUC,qBAAa,CAACC,MAAM;QAC9BC,QAAQ;QACRC,gBAAgB;QAChBC,QAAQC,mBAAW,CAACC,GAAG;QACvBC,eAAe;QACfC,uBAAuB;QACvBC,wBAAwB;QACxBC,cAAc;QACdC,WAAW,EAAE;IACf,CAAA;AAEO,MAAM7B,mCAAmC,IAA+B,CAAA;QAC7EsB,QAAQC,mBAAW,CAACC,GAAG;IACzB,CAAA;AAEO,MAAM1B,gCAAgC,IAA4B,CAAA;QACvE+B,WAAW,EAAE;IACf,CAAA;AAEO,MAAMjC,yBAAyB,CAACkC;QAKbA,sBACCA;WANmD;QAC5Ef,sBAAsBe,KAAKf,oBAAoB;QAC/CC,UAAUc,KAAKd,QAAQ,IAAI;QAC3BC,UAAUa,KAAKb,QAAQ;QACvBc,UAAUD,KAAKV,MAAM,CAAEY,EAAE;QACzBC,wBAAwBH,EAAAA,uBAAAA,KAAKT,cAAc,qBAAnBS,qBAAqBI,QAAQ,KAAI;QACzDC,yBAAyBL,EAAAA,wBAAAA,KAAKT,cAAc,qBAAnBS,sBAAqBM,SAAS,KAAI;QAC3Dd,QAAQQ,KAAKR,MAAM;QACnBG,eAAeK,KAAKL,aAAa,IAAI;QACrCC,uBAAuBzB,iBAAiB6B,KAAKJ,qBAAqB;QAClEC,wBAAwBG,KAAKH,sBAAsB,IAAI;QACvDC,cAAcE,KAAKF,YAAY,IAAI;QACnCS,aAAaP,KAAKD,SAAS,CAACS,GAAG,CAACC,CAAAA,IAAKA,EAAEP,EAAE;IAC3C;;AAEO,MAAMnC,qCAAqC,CAACiC,OAAyD,CAAA;QAC1GR,QAAQQ,KAAKR,MAAM;IACrB,CAAA;AAEO,MAAM3B,kCAAkC,CAACmC,OAAmD,CAAA;QACjGO,aAAaP,KAAKD,SAAS,CAACS,GAAG,CAACC,CAAAA,IAAKA,EAAEP,EAAE;IAC3C,CAAA"}