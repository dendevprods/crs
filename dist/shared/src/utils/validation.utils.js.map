{"version":3,"sources":["../../../../shared/src/utils/validation.utils.ts"],"sourcesContent":["import { FormErrors } from 'shared/errors/validation.error';\nimport validator from 'validator';\n\nexport const ValidationRules = {\n  required: (value: string) => !validator.isEmpty(value?.trim() || ''),\n\n  minLength: (value: string, min: number) => validator.isLength(value?.trim() || '', { min }),\n  maxLength: (value: string, max: number) => validator.isLength(value?.trim() || '', { max }),\n  exactLength: (value: string, length: number) => validator.isLength(value?.trim() || '', { min: length, max: length }),\n\n  email: (value: string) => validator.isEmail(value?.trim() || ''),\n  phone: (value: string) => validator.isMobilePhone(value?.trim() || '', 'any'),\n  url: (value: string) => validator.isURL(value?.trim() || ''),\n\n  taxId: (value: string) => /^[A-Z0-9]{8,15}$/i.test(value?.trim() || ''),\n\n  date: (value: string) => {\n    if (!value) return true;\n    const d = new Date(value);\n    return !isNaN(d.getTime());\n  },\n\n  decimal: (value: any) => {\n    if (value === null || value === undefined) return false;\n    return validator.isDecimal(String(value).trim());\n  },\n};\n\nexport const createValidator = (rules: Array<{ check: (value: any) => boolean; message: string | ((value: any) => string) }>) => {\n  return (value: any): string | null => {\n    for (const rule of rules) {\n      if (!rule.check(value)) {\n        return typeof rule.message === 'string' ? rule.message : rule.message(value);\n      }\n    }\n    return null;\n  };\n};\n\nexport const isFormValid = (\n  errors: FormErrors<any>\n): boolean => {\n\n  const isErrorValueValid = (value: unknown): boolean => {\n    if (value === null) return true;\n\n    if (Array.isArray(value)) {\n      return value.every(isErrorValueValid);\n    }\n\n    if (typeof value === 'object' && value !== null) {\n      return Object.values(value).every(isErrorValueValid);\n    }\n\n    return false;\n  };\n\n  return Object.values(errors).every(isErrorValueValid);\n};\n\n"],"names":["ValidationRules","createValidator","isFormValid","required","value","validator","isEmpty","trim","minLength","min","isLength","maxLength","max","exactLength","length","email","isEmail","phone","isMobilePhone","url","isURL","taxId","test","date","d","Date","isNaN","getTime","decimal","undefined","isDecimal","String","rules","rule","check","message","errors","isErrorValueValid","Array","isArray","every","Object","values"],"rangeMappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","mappings":";;;;;;;;;;;IAGaA,eAAe;eAAfA;;IAyBAC,eAAe;eAAfA;;IAWAC,WAAW;eAAXA;;;;oEAtCS;AAEf,MAAMF,kBAAkB;IAC7BG,UAAU,CAACC,QAAkB,CAACC,kBAAS,CAACC,OAAO,CAACF,CAAAA,yBAAAA,MAAOG,IAAI,OAAM;IAEjEC,WAAW,CAACJ,OAAeK,MAAgBJ,kBAAS,CAACK,QAAQ,CAACN,CAAAA,yBAAAA,MAAOG,IAAI,OAAM,IAAI;YAAEE;QAAI;IACzFE,WAAW,CAACP,OAAeQ,MAAgBP,kBAAS,CAACK,QAAQ,CAACN,CAAAA,yBAAAA,MAAOG,IAAI,OAAM,IAAI;YAAEK;QAAI;IACzFC,aAAa,CAACT,OAAeU,SAAmBT,kBAAS,CAACK,QAAQ,CAACN,CAAAA,yBAAAA,MAAOG,IAAI,OAAM,IAAI;YAAEE,KAAKK;YAAQF,KAAKE;QAAO;IAEnHC,OAAO,CAACX,QAAkBC,kBAAS,CAACW,OAAO,CAACZ,CAAAA,yBAAAA,MAAOG,IAAI,OAAM;IAC7DU,OAAO,CAACb,QAAkBC,kBAAS,CAACa,aAAa,CAACd,CAAAA,yBAAAA,MAAOG,IAAI,OAAM,IAAI;IACvEY,KAAK,CAACf,QAAkBC,kBAAS,CAACe,KAAK,CAAChB,CAAAA,yBAAAA,MAAOG,IAAI,OAAM;IAEzDc,OAAO,CAACjB,QAAkB,oBAAoBkB,IAAI,CAAClB,CAAAA,yBAAAA,MAAOG,IAAI,OAAM;IAEpEgB,MAAM,CAACnB;QACL,IAAI,CAACA,OAAO,OAAO;QACnB,MAAMoB,IAAI,IAAIC,KAAKrB;QACnB,OAAO,CAACsB,MAAMF,EAAEG,OAAO;IACzB;IAEAC,SAAS,CAACxB;QACR,IAAIA,UAAU,QAAQA,UAAUyB,WAAW,OAAO;QAClD,OAAOxB,kBAAS,CAACyB,SAAS,CAACC,OAAO3B,OAAOG,IAAI;IAC/C;AACF;AAEO,MAAMN,kBAAkB,CAAC+B;IAC9B,OAAO,CAAC5B;QACN,KAAK,MAAM6B,QAAQD,MAAO;YACxB,IAAI,CAACC,KAAKC,KAAK,CAAC9B,QAAQ;gBACtB,OAAO,OAAO6B,KAAKE,OAAO,KAAK,WAAWF,KAAKE,OAAO,GAAGF,KAAKE,OAAO,CAAC/B;YACxE;QACF;QACA,OAAO;IACT;AACF;AAEO,MAAMF,cAAc,CACzBkC;IAGA,MAAMC,oBAAoB,CAACjC;QACzB,IAAIA,UAAU,MAAM,OAAO;QAE3B,IAAIkC,MAAMC,OAAO,CAACnC,QAAQ;YACxB,OAAOA,MAAMoC,KAAK,CAACH;QACrB;QAEA,IAAI,OAAOjC,UAAU,YAAYA,UAAU,MAAM;YAC/C,OAAOqC,OAAOC,MAAM,CAACtC,OAAOoC,KAAK,CAACH;QACpC;QAEA,OAAO;IACT;IAEA,OAAOI,OAAOC,MAAM,CAACN,QAAQI,KAAK,CAACH;AACrC"}